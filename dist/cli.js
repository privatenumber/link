#!/usr/bin/env node
"use strict";var kt=require("fs/promises"),jt=require("tty"),xt=require("path"),mi=require("module"),Tt=require("fs"),Rt=require("events");function ne(u){return u&&typeof u=="object"&&"default"in u?u:{default:u}}var O=ne(kt),Pt=ne(jt),A=ne(xt),au=ne(Tt),Lt=ne(Rt);const Mt="known-flag",_t="unknown-flag",Nt="argument",{stringify:ie}=JSON,It=/\B([A-Z])/g,Wt=u=>u.replace(It,"-$1").toLowerCase(),{hasOwnProperty:Gt}=Object.prototype,se=(u,e)=>Gt.call(u,e),qt=u=>Array.isArray(u),ou=u=>typeof u=="function"?[u,!1]:qt(u)?[u[0],!0]:ou(u.type),zt=(u,e)=>u===Boolean?e!=="false":e,Jt=(u,e)=>typeof e=="boolean"?e:u===Number&&e===""?Number.NaN:u(e),Vt=/[\s.:=]/,Ut=u=>{const e=`Flag name ${ie(u)}`;if(u.length===0)throw new Error(`${e} cannot be empty`);if(u.length===1)throw new Error(`${e} must be longer than a character`);const t=u.match(Vt);if(t)throw new Error(`${e} cannot contain ${ie(t?.[0])}`)},Zt=u=>{const e={},t=(D,n)=>{if(se(e,D))throw new Error(`Duplicate flags named ${ie(D)}`);e[D]=n};for(const D in u){if(!se(u,D))continue;Ut(D);const n=u[D],i=[[],...ou(n),n];t(D,i);const s=Wt(D);if(D!==s&&t(s,i),"alias"in n&&typeof n.alias=="string"){const{alias:a}=n,o=`Flag alias ${ie(a)} for flag ${ie(D)}`;if(a.length===0)throw new Error(`${o} cannot be empty`);if(a.length>1)throw new Error(`${o} must be a single character`);t(a,i)}}return e},Ht=(u,e)=>{const t={};for(const D in u){if(!se(u,D))continue;const[n,,i,s]=e[D];if(n.length===0&&"default"in s){let{default:a}=s;typeof a=="function"&&(a=a()),t[D]=a}else t[D]=i?n:n.pop()}return t},me="--",Xt=/[.:=]/,Yt=/^-{1,2}\w/,Kt=u=>{if(!Yt.test(u))return;const e=!u.startsWith(me);let t=u.slice(e?1:2),D;const n=t.match(Xt);if(n){const{index:i}=n;D=t.slice(i+1),t=t.slice(0,i)}return[t,D,e]},Qt=(u,{onFlag:e,onArgument:t})=>{let D;const n=(i,s)=>{if(typeof D!="function")return!0;D(i,s),D=void 0};for(let i=0;i<u.length;i+=1){const s=u[i];if(s===me){n();const o=u.slice(i+1);t?.(o,[i],!0);break}const a=Kt(s);if(a){if(n(),!e)continue;const[o,h,p]=a;if(p)for(let g=0;g<o.length;g+=1){n();const F=g===o.length-1;D=e(o[g],F?h:void 0,[i,g+1,F])}else D=e(o,h,[i])}else n(s,[i])&&t?.([s],[i])}n()},eD=(u,e)=>{for(const[t,D,n]of e.reverse()){if(D){const i=u[t];let s=i.slice(0,D);if(n||(s+=i.slice(D+1)),s!=="-"){u[t]=s;continue}}u.splice(t,1)}},uD=(u,e=process.argv.slice(2),{ignore:t}={})=>{const D=[],n=Zt(u),i={},s=[];return s[me]=[],Qt(e,{onFlag(a,o,h){const p=se(n,a);if(!t?.(p?Mt:_t,a,o)){if(p){const[g,F]=n[a],d=zt(F,o),m=(w,S)=>{D.push(h),S&&D.push(S),g.push(Jt(F,w||""))};return d===void 0?m:m(d)}se(i,a)||(i[a]=[]),i[a].push(o===void 0?!0:o),D.push(h)}},onArgument(a,o,h){t?.(Nt,e[o[0]])||(s.push(...a),h?(s[me]=a,e.splice(o[0])):D.push(o))}}),eD(e,D),{flags:Ht(u,n),unknownFlags:i,_:s}};var tD=Object.create,Be=Object.defineProperty,DD=Object.defineProperties,nD=Object.getOwnPropertyDescriptor,iD=Object.getOwnPropertyDescriptors,sD=Object.getOwnPropertyNames,lu=Object.getOwnPropertySymbols,rD=Object.getPrototypeOf,cu=Object.prototype.hasOwnProperty,aD=Object.prototype.propertyIsEnumerable,hu=(u,e,t)=>e in u?Be(u,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):u[e]=t,we=(u,e)=>{for(var t in e||(e={}))cu.call(e,t)&&hu(u,t,e[t]);if(lu)for(var t of lu(e))aD.call(e,t)&&hu(u,t,e[t]);return u},Pe=(u,e)=>DD(u,iD(e)),oD=u=>Be(u,"__esModule",{value:!0}),lD=(u,e)=>()=>(u&&(e=u(u=0)),e),cD=(u,e)=>()=>(e||u((e={exports:{}}).exports,e),e.exports),hD=(u,e,t,D)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of sD(e))!cu.call(u,n)&&(t||n!=="default")&&Be(u,n,{get:()=>e[n],enumerable:!(D=nD(e,n))||D.enumerable});return u},fD=(u,e)=>hD(oD(Be(u!=null?tD(rD(u)):{},"default",!e&&u&&u.__esModule?{get:()=>u.default,enumerable:!0}:{value:u,enumerable:!0})),u),x=lD(()=>{}),pD=cD((u,e)=>{x(),e.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|(?:\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC68(?:\uD83C\uDFFB(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|[\u2695\u2696\u2708]\uFE0F|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))?|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC)?|(?:\uD83D\uDC69(?:\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83E\uDDD1(?:\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDE35\u200D\uD83D\uDCAB|\uD83D\uDE2E\u200D\uD83D\uDCA8|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83E\uDDD1(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\u2764\uFE0F\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|\u2764\uFE0F|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE2E\uDE35\uDE36\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}});x(),x(),x();var FD=u=>{var e,t,D;let n=(e=process.stdout.columns)!=null?e:Number.POSITIVE_INFINITY;return typeof u=="function"&&(u=u(n)),u||(u={}),Array.isArray(u)?{columns:u,stdoutColumns:n}:{columns:(t=u.columns)!=null?t:[],stdoutColumns:(D=u.stdoutColumns)!=null?D:n}};x(),x(),x(),x(),x();function dD({onlyFirst:u=!1}={}){let e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(e,u?void 0:"g")}function fu(u){if(typeof u!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof u}\``);return u.replace(dD(),"")}x();function CD(u){return Number.isInteger(u)?u>=4352&&(u<=4447||u===9001||u===9002||11904<=u&&u<=12871&&u!==12351||12880<=u&&u<=19903||19968<=u&&u<=42182||43360<=u&&u<=43388||44032<=u&&u<=55203||63744<=u&&u<=64255||65040<=u&&u<=65049||65072<=u&&u<=65131||65281<=u&&u<=65376||65504<=u&&u<=65510||110592<=u&&u<=110593||127488<=u&&u<=127569||131072<=u&&u<=262141):!1}var ED=fD(pD(),1);function V(u){if(typeof u!="string"||u.length===0||(u=fu(u),u.length===0))return 0;u=u.replace((0,ED.default)(),"  ");let e=0;for(let t=0;t<u.length;t++){let D=u.codePointAt(t);D<=31||D>=127&&D<=159||D>=768&&D<=879||(D>65535&&t++,e+=CD(D)?2:1)}return e}var pu=u=>Math.max(...u.split(`
`).map(V)),gD=u=>{let e=[];for(let t of u){let{length:D}=t,n=D-e.length;for(let i=0;i<n;i+=1)e.push(0);for(let i=0;i<D;i+=1){let s=pu(t[i]);s>e[i]&&(e[i]=s)}}return e};x();var Fu=/^\d+%$/,du={width:"auto",align:"left",contentWidth:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,horizontalPadding:0,paddingLeftString:"",paddingRightString:""},mD=(u,e)=>{var t;let D=[];for(let n=0;n<u.length;n+=1){let i=(t=e[n])!=null?t:"auto";if(typeof i=="number"||i==="auto"||i==="content-width"||typeof i=="string"&&Fu.test(i)){D.push(Pe(we({},du),{width:i,contentWidth:u[n]}));continue}if(i&&typeof i=="object"){let s=Pe(we(we({},du),i),{contentWidth:u[n]});s.horizontalPadding=s.paddingLeft+s.paddingRight,D.push(s);continue}throw new Error(`Invalid column width: ${JSON.stringify(i)}`)}return D};function BD(u,e){for(let t of u){let{width:D}=t;if(D==="content-width"&&(t.width=t.contentWidth),D==="auto"){let o=Math.min(20,t.contentWidth);t.width=o,t.autoOverflow=t.contentWidth-o}if(typeof D=="string"&&Fu.test(D)){let o=Number.parseFloat(D.slice(0,-1))/100;t.width=Math.floor(e*o)-(t.paddingLeft+t.paddingRight)}let{horizontalPadding:n}=t,i=1,s=i+n;if(s>=e){let o=s-e,h=Math.ceil(t.paddingLeft/n*o),p=o-h;t.paddingLeft-=h,t.paddingRight-=p,t.horizontalPadding=t.paddingLeft+t.paddingRight}t.paddingLeftString=t.paddingLeft?" ".repeat(t.paddingLeft):"",t.paddingRightString=t.paddingRight?" ".repeat(t.paddingRight):"";let a=e-t.horizontalPadding;t.width=Math.max(Math.min(t.width,a),i)}}var Cu=()=>Object.assign([],{columns:0});function wD(u,e){let t=[Cu()],[D]=t;for(let n of u){let i=n.width+n.horizontalPadding;D.columns+i>e&&(D=Cu(),t.push(D)),D.push(n),D.columns+=i}for(let n of t){let i=n.reduce((F,d)=>F+d.width+d.horizontalPadding,0),s=e-i;if(s===0)continue;let a=n.filter(F=>"autoOverflow"in F),o=a.filter(F=>F.autoOverflow>0),h=o.reduce((F,d)=>F+d.autoOverflow,0),p=Math.min(h,s);for(let F of o){let d=Math.floor(F.autoOverflow/h*p);F.width+=d,s-=d}let g=Math.floor(s/a.length);for(let F=0;F<a.length;F+=1){let d=a[F];F===a.length-1?d.width+=s:d.width+=g,s-=g}}return t}function yD(u,e,t){let D=mD(t,e);return BD(D,u),wD(D,u)}x(),x(),x();var Le=10,Eu=(u=0)=>e=>`\x1B[${e+u}m`,gu=(u=0)=>e=>`\x1B[${38+u};5;${e}m`,mu=(u=0)=>(e,t,D)=>`\x1B[${38+u};2;${e};${t};${D}m`;function $D(){let u=new Map,e={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};e.color.gray=e.color.blackBright,e.bgColor.bgGray=e.bgColor.bgBlackBright,e.color.grey=e.color.blackBright,e.bgColor.bgGrey=e.bgColor.bgBlackBright;for(let[t,D]of Object.entries(e)){for(let[n,i]of Object.entries(D))e[n]={open:`\x1B[${i[0]}m`,close:`\x1B[${i[1]}m`},D[n]=e[n],u.set(i[0],i[1]);Object.defineProperty(e,t,{value:D,enumerable:!1})}return Object.defineProperty(e,"codes",{value:u,enumerable:!1}),e.color.close="\x1B[39m",e.bgColor.close="\x1B[49m",e.color.ansi=Eu(),e.color.ansi256=gu(),e.color.ansi16m=mu(),e.bgColor.ansi=Eu(Le),e.bgColor.ansi256=gu(Le),e.bgColor.ansi16m=mu(Le),Object.defineProperties(e,{rgbToAnsi256:{value:(t,D,n)=>t===D&&D===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(D/255*5)+Math.round(n/255*5),enumerable:!1},hexToRgb:{value:t=>{let D=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(t.toString(16));if(!D)return[0,0,0];let{colorString:n}=D.groups;n.length===3&&(n=n.split("").map(s=>s+s).join(""));let i=Number.parseInt(n,16);return[i>>16&255,i>>8&255,i&255]},enumerable:!1},hexToAnsi256:{value:t=>e.rgbToAnsi256(...e.hexToRgb(t)),enumerable:!1},ansi256ToAnsi:{value:t=>{if(t<8)return 30+t;if(t<16)return 90+(t-8);let D,n,i;if(t>=232)D=((t-232)*10+8)/255,n=D,i=D;else{t-=16;let o=t%36;D=Math.floor(t/36)/5,n=Math.floor(o/6)/5,i=o%6/5}let s=Math.max(D,n,i)*2;if(s===0)return 30;let a=30+(Math.round(i)<<2|Math.round(n)<<1|Math.round(D));return s===2&&(a+=60),a},enumerable:!1},rgbToAnsi:{value:(t,D,n)=>e.ansi256ToAnsi(e.rgbToAnsi256(t,D,n)),enumerable:!1},hexToAnsi:{value:t=>e.ansi256ToAnsi(e.hexToAnsi256(t)),enumerable:!1}}),e}var AD=$D(),bD=AD,ye=new Set(["\x1B","\x9B"]),vD=39,Me="\x07",Bu="[",SD="]",wu="m",_e=`${SD}8;;`,yu=u=>`${ye.values().next().value}${Bu}${u}${wu}`,$u=u=>`${ye.values().next().value}${_e}${u}${Me}`,OD=u=>u.split(" ").map(e=>V(e)),Ne=(u,e,t)=>{let D=[...e],n=!1,i=!1,s=V(fu(u[u.length-1]));for(let[a,o]of D.entries()){let h=V(o);if(s+h<=t?u[u.length-1]+=o:(u.push(o),s=0),ye.has(o)&&(n=!0,i=D.slice(a+1).join("").startsWith(_e)),n){i?o===Me&&(n=!1,i=!1):o===wu&&(n=!1);continue}s+=h,s===t&&a<D.length-1&&(u.push(""),s=0)}!s&&u[u.length-1].length>0&&u.length>1&&(u[u.length-2]+=u.pop())},kD=u=>{let e=u.split(" "),t=e.length;for(;t>0&&!(V(e[t-1])>0);)t--;return t===e.length?u:e.slice(0,t).join(" ")+e.slice(t).join("")},jD=(u,e,t={})=>{if(t.trim!==!1&&u.trim()==="")return"";let D="",n,i,s=OD(u),a=[""];for(let[h,p]of u.split(" ").entries()){t.trim!==!1&&(a[a.length-1]=a[a.length-1].trimStart());let g=V(a[a.length-1]);if(h!==0&&(g>=e&&(t.wordWrap===!1||t.trim===!1)&&(a.push(""),g=0),(g>0||t.trim===!1)&&(a[a.length-1]+=" ",g++)),t.hard&&s[h]>e){let F=e-g,d=1+Math.floor((s[h]-F-1)/e);Math.floor((s[h]-1)/e)<d&&a.push(""),Ne(a,p,e);continue}if(g+s[h]>e&&g>0&&s[h]>0){if(t.wordWrap===!1&&g<e){Ne(a,p,e);continue}a.push("")}if(g+s[h]>e&&t.wordWrap===!1){Ne(a,p,e);continue}a[a.length-1]+=p}t.trim!==!1&&(a=a.map(h=>kD(h)));let o=[...a.join(`
`)];for(let[h,p]of o.entries()){if(D+=p,ye.has(p)){let{groups:F}=new RegExp(`(?:\\${Bu}(?<code>\\d+)m|\\${_e}(?<uri>.*)${Me})`).exec(o.slice(h).join(""))||{groups:{}};if(F.code!==void 0){let d=Number.parseFloat(F.code);n=d===vD?void 0:d}else F.uri!==void 0&&(i=F.uri.length===0?void 0:F.uri)}let g=bD.codes.get(Number(n));o[h+1]===`
`?(i&&(D+=$u("")),n&&g&&(D+=yu(g))):p===`
`&&(n&&g&&(D+=yu(n)),i&&(D+=$u(i)))}return D};function xD(u,e,t){return String(u).normalize().replace(/\r\n/g,`
`).split(`
`).map(D=>jD(D,e,t)).join(`
`)}var Au=u=>Array.from({length:u}).fill("");function TD(u,e){let t=[],D=0;for(let n of u){let i=0,s=n.map(o=>{var h;let p=(h=e[D])!=null?h:"";D+=1,o.preprocess&&(p=o.preprocess(p)),pu(p)>o.width&&(p=xD(p,o.width,{hard:!0}));let g=p.split(`
`);if(o.postprocess){let{postprocess:F}=o;g=g.map((d,m)=>F.call(o,d,m))}return o.paddingTop&&g.unshift(...Au(o.paddingTop)),o.paddingBottom&&g.push(...Au(o.paddingBottom)),g.length>i&&(i=g.length),Pe(we({},o),{lines:g})}),a=[];for(let o=0;o<i;o+=1){let h=s.map(p=>{var g;let F=(g=p.lines[o])!=null?g:"",d=Number.isFinite(p.width)?" ".repeat(p.width-V(F)):"",m=p.paddingLeftString;return p.align==="right"&&(m+=d),m+=F,p.align==="left"&&(m+=d),m+p.paddingRightString}).join("");a.push(h)}t.push(a.join(`
`))}return t.join(`
`)}function RD(u,e){if(!u||u.length===0)return"";let t=gD(u),D=t.length;if(D===0)return"";let{stdoutColumns:n,columns:i}=FD(e);if(i.length>D)throw new Error(`${i.length} columns defined, but only ${D} columns found`);let s=yD(n,i,t);return u.map(a=>TD(s,a)).join(`
`)}x();var PD=["<",">","=",">=","<="];function LD(u){if(!PD.includes(u))throw new TypeError(`Invalid breakpoint operator: ${u}`)}function MD(u){let e=Object.keys(u).map(t=>{let[D,n]=t.split(" ");LD(D);let i=Number.parseInt(n,10);if(Number.isNaN(i))throw new TypeError(`Invalid breakpoint value: ${n}`);let s=u[t];return{operator:D,breakpoint:i,value:s}}).sort((t,D)=>D.breakpoint-t.breakpoint);return t=>{var D;return(D=e.find(({operator:n,breakpoint:i})=>n==="="&&t===i||n===">"&&t>i||n==="<"&&t<i||n===">="&&t>=i||n==="<="&&t<=i))==null?void 0:D.value}}const _D=u=>u.replace(/[\W_]([a-z\d])?/gi,(e,t)=>t?t.toUpperCase():""),ND=u=>u.replace(/\B([A-Z])/g,"-$1").toLowerCase(),ID={"> 80":[{width:"content-width",paddingLeft:2,paddingRight:8},{width:"auto"}],"> 40":[{width:"auto",paddingLeft:2,paddingRight:8,preprocess:u=>u.trim()},{width:"100%",paddingLeft:2,paddingBottom:1}],"> 0":{stdoutColumns:1e3,columns:[{width:"content-width",paddingLeft:2,paddingRight:8},{width:"content-width"}]}};function WD(u){let e=!1;return{type:"table",data:{tableData:Object.keys(u).sort((t,D)=>t.localeCompare(D)).map(t=>{const D=u[t],n="alias"in D;return n&&(e=!0),{name:t,flag:D,flagFormatted:`--${ND(t)}`,aliasesEnabled:e,aliasFormatted:n?`-${D.alias}`:void 0}}).map(t=>(t.aliasesEnabled=e,[{type:"flagName",data:t},{type:"flagDescription",data:t}])),tableBreakpoints:ID}}}const bu=u=>!u||(u.version??(u.help?u.help.version:void 0)),vu=u=>{const e="parent"in u&&u.parent?.name;return(e?`${e} `:"")+u.name};function GD(u){const e=[];u.name&&e.push(vu(u));const t=bu(u)??("parent"in u&&bu(u.parent));if(t&&e.push(`v${t}`),e.length!==0)return{id:"name",type:"text",data:`${e.join(" ")}
`}}function qD(u){const{help:e}=u;if(!(!e||!e.description))return{id:"description",type:"text",data:`${e.description}
`}}function zD(u){const e=u.help||{};if("usage"in e)return e.usage?{id:"usage",type:"section",data:{title:"Usage:",body:Array.isArray(e.usage)?e.usage.join(`
`):e.usage}}:void 0;if(u.name){const t=[],D=[vu(u)];if(u.flags&&Object.keys(u.flags).length>0&&D.push("[flags...]"),u.parameters&&u.parameters.length>0){const{parameters:n}=u,i=n.indexOf("--"),s=i>-1&&n.slice(i+1).some(a=>a.startsWith("<"));D.push(n.map(a=>a!=="--"?a:s?"--":"[--]").join(" "))}if(D.length>1&&t.push(D.join(" ")),"commands"in u&&u.commands?.length&&t.push(`${u.name} <command>`),t.length>0)return{id:"usage",type:"section",data:{title:"Usage:",body:t.join(`
`)}}}}function JD(u){return!("commands"in u)||!u.commands?.length?void 0:{id:"commands",type:"section",data:{title:"Commands:",body:{type:"table",data:{tableData:u.commands.map(e=>[e.options.name,e.options.help?e.options.help.description:""]),tableOptions:[{width:"content-width",paddingLeft:2,paddingRight:8}]}},indentBody:0}}}function VD(u){if(!(!u.flags||Object.keys(u.flags).length===0))return{id:"flags",type:"section",data:{title:"Flags:",body:WD(u.flags),indentBody:0}}}function UD(u){const{help:e}=u;if(!e||!e.examples||e.examples.length===0)return;let{examples:t}=e;if(Array.isArray(t)&&(t=t.join(`
`)),t)return{id:"examples",type:"section",data:{title:"Examples:",body:t}}}function ZD(u){if(!("alias"in u)||!u.alias)return;const{alias:e}=u;return{id:"aliases",type:"section",data:{title:"Aliases:",body:Array.isArray(e)?e.join(", "):e}}}const HD=u=>[GD,qD,zD,JD,VD,UD,ZD].map(e=>e(u)).filter(Boolean),XD=Pt.default.WriteStream.prototype.hasColors();class YD{text(e){return e}bold(e){return XD?`\x1B[1m${e}\x1B[22m`:e.toLocaleUpperCase()}indentText({text:e,spaces:t}){return e.replace(/^/gm," ".repeat(t))}heading(e){return this.bold(e)}section({title:e,body:t,indentBody:D=2}){return`${(e?`${this.heading(e)}
`:"")+(t?this.indentText({text:this.render(t),spaces:D}):"")}
`}table({tableData:e,tableOptions:t,tableBreakpoints:D}){return RD(e.map(n=>n.map(i=>this.render(i))),D?MD(D):t)}flagParameter(e){return e===Boolean?"":e===String?"<string>":e===Number?"<number>":Array.isArray(e)?this.flagParameter(e[0]):"<value>"}flagOperator(e){return" "}flagName(e){const{flag:t,flagFormatted:D,aliasesEnabled:n,aliasFormatted:i}=e;let s="";if(i?s+=`${i}, `:n&&(s+="    "),s+=D,"placeholder"in t&&typeof t.placeholder=="string")s+=`${this.flagOperator(e)}${t.placeholder}`;else{const a=this.flagParameter("type"in t?t.type:t);a&&(s+=`${this.flagOperator(e)}${a}`)}return s}flagDefault(e){return JSON.stringify(e)}flagDescription({flag:e}){let t="description"in e?e.description??"":"";if("default"in e){let{default:D}=e;typeof D=="function"&&(D=D()),D&&(t+=` (default: ${this.flagDefault(D)})`)}return t}render(e){if(typeof e=="string")return e;if(Array.isArray(e))return e.map(t=>this.render(t)).join(`
`);if("type"in e&&this[e.type]){const t=this[e.type];if(typeof t=="function")return t.call(this,e.data)}throw new Error(`Invalid node type: ${JSON.stringify(e)}`)}}const Ie=/^[\w.-]+$/,{stringify:N}=JSON,KD=/[|\\{}()[\]^$+*?.]/;function We(u){const e=[];let t,D;for(const n of u){if(D)throw new Error(`Invalid parameter: Spread parameter ${N(D)} must be last`);const i=n[0],s=n[n.length-1];let a;if(i==="<"&&s===">"&&(a=!0,t))throw new Error(`Invalid parameter: Required parameter ${N(n)} cannot come after optional parameter ${N(t)}`);if(i==="["&&s==="]"&&(a=!1,t=n),a===void 0)throw new Error(`Invalid parameter: ${N(n)}. Must be wrapped in <> (required parameter) or [] (optional parameter)`);let o=n.slice(1,-1);const h=o.slice(-3)==="...";h&&(D=n,o=o.slice(0,-3));const p=o.match(KD);if(p)throw new Error(`Invalid parameter: ${N(n)}. Invalid character found ${N(p[0])}`);e.push({name:o,required:a,spread:h})}return e}function Ge(u,e,t,D){for(let n=0;n<e.length;n+=1){const{name:i,required:s,spread:a}=e[n],o=_D(i);if(o in u)throw new Error(`Invalid parameter: ${N(i)} is used more than once.`);const h=a?t.slice(n):t[n];if(a&&(n=e.length),s&&(!h||a&&h.length===0))return console.error(`Error: Missing required parameter ${N(i)}
`),D(),process.exit(1);u[o]=h}}function QD(u){return u===void 0||u!==!1}function Su(u,e,t,D){const n={...e.flags},i=e.version;i&&(n.version={type:Boolean,description:"Show version"});const{help:s}=e,a=QD(s);a&&!("help"in n)&&(n.help={type:Boolean,alias:"h",description:"Show help"});const o=uD(n,D,{ignore:e.ignoreArgv}),h=()=>{console.log(e.version)};if(i&&o.flags.version===!0)return h(),process.exit(0);const p=new YD,g=a&&s?.render?s.render:m=>p.render(m),F=m=>{const w=HD({...e,...m?{help:m}:{},flags:n});console.log(g(w,p))};if(a&&o.flags.help===!0)return F(),process.exit(0);if(e.parameters){let{parameters:m}=e,w=o._;const S=m.indexOf("--"),R=m.slice(S+1),M=Object.create(null);if(S>-1&&R.length>0){m=m.slice(0,S);const G=o._["--"];w=w.slice(0,-G.length||void 0),Ge(M,We(m),w,F),Ge(M,We(R),G,F)}else Ge(M,We(m),w,F);Object.assign(o._,M)}const d={...o,showVersion:h,showHelp:F};return typeof t=="function"&&t(d),{command:u,...d}}function en(u,e){const t=new Map;for(const D of e){const n=[D.options.name],{alias:i}=D.options;i&&(Array.isArray(i)?n.push(...i):n.push(i));for(const s of n){if(t.has(s))throw new Error(`Duplicate command name found: ${N(s)}`);t.set(s,D)}}return t.get(u)}function un(u,e,t=process.argv.slice(2)){if(!u)throw new Error("Options is required");if("name"in u&&(!u.name||!Ie.test(u.name)))throw new Error(`Invalid script name: ${N(u.name)}`);const D=t[0];if(u.commands&&Ie.test(D)){const n=en(D,u.commands);if(n)return Su(n.options.name,{...n.options,parent:u},n.callback,t.slice(1))}return Su(void 0,u,e,t)}function tn(u,e){if(!u)throw new Error("Command options are required");const{name:t}=u;if(u.name===void 0)throw new Error("Command name is required");if(!Ie.test(t))throw new Error(`Invalid command name ${JSON.stringify(t)}. Command names must be one word.`);return{options:u,callback:e}}function $e(){}function Ou(){return typeof WeakMap<"u"?new WeakMap:Dn()}function Dn(){return{add:$e,delete:$e,get:$e,set:$e,has:function(u){return!1}}}var nn=Object.prototype.hasOwnProperty,qe=function(u,e){return nn.call(u,e)};function ze(u,e){for(var t in e)qe(e,t)&&(u[t]=e[t]);return u}var sn=/^[ \t]*(?:\r\n|\r|\n)/,rn=/(?:\r\n|\r|\n)[ \t]*$/,an=/^(?:[\r\n]|$)/,on=/(?:\r\n|\r|\n)([ \t]*)(?:[^ \t\r\n]|$)/,ln=/^[ \t]*[\r\n][ \t\r\n]*$/;function ku(u,e,t){var D=0,n=u[0].match(on);n&&(D=n[1].length);var i="(\\r\\n|\\r|\\n).{0,"+D+"}",s=new RegExp(i,"g");e&&(u=u.slice(1));var a=t.newline,o=t.trimLeadingNewline,h=t.trimTrailingNewline,p=typeof a=="string",g=u.length,F=u.map(function(d,m){return d=d.replace(s,"$1"),m===0&&o&&(d=d.replace(sn,"")),m===g-1&&h&&(d=d.replace(rn,"")),p&&(d=d.replace(/\r\n|\n|\r/g,function(w){return a})),d});return F}function cn(u,e){for(var t="",D=0,n=u.length;D<n;D++)t+=u[D],D<n-1&&(t+=e[D]);return t}function hn(u){return qe(u,"raw")&&qe(u,"length")}function ju(u){var e=Ou(),t=Ou();function D(i){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];if(hn(i)){var o=i,h=(s[0]===D||s[0]===W)&&ln.test(o[0])&&an.test(o[1]),p=h?t:e,g=p.get(o);if(g||(g=ku(o,h,u),p.set(o,g)),s.length===0)return g[0];var F=cn(g,h?s.slice(1):s);return F}else return ju(ze(ze({},u),i||{}))}var n=ze(D,{string:function(i){return ku([i],!1,u)[0]}});return n}var W=ju({trimLeadingNewline:!0,trimTrailingNewline:!0});if(typeof module<"u")try{module.exports=W,Object.defineProperty(W,"__esModule",{value:!0}),W.default=W,W.outdent=W}catch{}let U=!0;const H=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};let re=0;if(H.process&&H.process.env&&H.process.stdout){const{FORCE_COLOR:u,NODE_DISABLE_COLORS:e,NO_COLOR:t,TERM:D,COLORTERM:n}=H.process.env;e||t||u==="0"?U=!1:u==="1"||u==="2"||u==="3"?U=!0:D==="dumb"?U=!1:"CI"in H.process.env&&["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(i=>i in H.process.env)?U=!0:U=process.stdout.isTTY,U&&(process.platform==="win32"||n&&(n==="truecolor"||n==="24bit")?re=3:D&&(D.endsWith("-256color")||D.endsWith("256"))?re=2:re=1)}let xu={enabled:U,supportLevel:re};function X(u,e,t=1){const D=`\x1B[${u}m`,n=`\x1B[${e}m`,i=new RegExp(`\\x1b\\[${e}m`,"g");return s=>xu.enabled&&xu.supportLevel>=t?D+(""+s).replace(i,D)+n:""+s}const fn=X(1,22),Je=X(2,22),Tu=X(31,39),Ru=X(32,39),Ve=X(35,39),ae=X(36,39),oe=u=>O.default.access(u).then(()=>!0,()=>!1);var pn=require;const Pu=async u=>{const e=await O.default.readFile(u,"utf8");return JSON.parse(e)},Fn="link.config.json",Lu="link.config.js",Mu=async u=>{const e=A.default.join(u,Fn);if(await oe(e))try{return Pu(e)}catch(D){throw new Error(`Failed to parse config JSON ${e}: ${D.message}`)}const t=A.default.join(u,Lu);if(await oe(t))try{return pn(t)}catch(D){throw new Error(`Failed to load config file ${Lu}: ${D.message}`)}};var _u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nu(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var Ae={};Ae.replaceDollarWithPercentPair=Wu,Ae.convertToSetCommand=Iu,Ae.convertToSetCommands=Cn;function Iu(u,e){var t="";return u=u||"",u=u.trim(),e=e||"",e=e.trim(),u&&e&&e.length>0&&(t="@SET "+u+"="+Wu(e)+`\r
`),t}function dn(u){var e={};return u.map(function(t){var D=t.split("=");e[D[0]]=D[1]}),e}function Cn(u){var e=dn(u.split(" ")),t="";return Object.keys(e).forEach(function(D){t+=Iu(D,e[D])}),t}function Wu(u){var e=/\$\{?([^$@#?\- \t{}:]+)\}?/g,t="",D=0;do{var n=e.exec(u);if(n){var i=u.substring(D,n.index)||"";t+=i+"%"+n[1]+"%",D=e.lastIndex}}while(e.lastIndex>0);return t+=u.slice(D),t}const{chmod:Ue,mkdir:En,readFile:gn,stat:Gu,unlink:mn,writeFile:Ze}=O.default,{dirname:qu,relative:Bn}=A.default,wn=Ae,yn=/^#!\s*(?:\/usr\/bin\/env\s+(?:-S\s+)?((?:[^ \t=]+=[^ \t=]+\s+)*))?([^ \t]+)(.*)$/,$n=(u,e)=>Gu(u).then(()=>Xe(u,e),()=>{}),He=u=>mn(u).catch(()=>{}),Xe=(u,e)=>Gu(u).then(()=>An(u,e)),An=(u,e)=>Promise.all([He(e),He(e+".cmd"),He(e+".ps1")]).then(()=>bn(u,e)),bn=(u,e)=>En(qu(e),{recursive:!0}).then(()=>gn(u,"utf8")).then(t=>{const n=t.trim().split(/\r*\n/)[0].match(yn);if(!n)return Ye(u,e);const i=n[1]||"",s=n[2],a=n[3]||"";return Ye(u,e,s,a,i)},t=>Ye(u,e)),Ye=(u,e,t,D,n)=>{let i=Bn(qu(e),u),s=i.split("/").join("\\"),a,o=t&&t.split("\\").join("/"),h,p=o&&`"${o}$exe"`,g;i=i.split("\\").join("/"),D=D||"",n=n||"",t?(a=`"%dp0%\\${t}.exe"`,h=`"$basedir/${t}"`,g=`"$basedir/${t}$exe"`,s=`"%dp0%\\${s}"`,i=`"$basedir/${i}"`):(t=`"%dp0%\\${s}"`,o=`"$basedir/${i}"`,p=o,D="",s="",i="");const F=`@ECHO off\r
GOTO start\r
:find_dp0\r
SET dp0=%~dp0\r
EXIT /b\r
:start\r
SETLOCAL\r
CALL :find_dp0\r
`;let d;if(a){h=h.trim(),D=D.trim();const S=wn.convertToSetCommands(n);d=F+S+`\r
IF EXIST ${a} (\r
  SET "_prog=${a.replace(/(^")|("$)/g,"")}"\r
) ELSE (\r
  SET "_prog=${t.replace(/(^")|("$)/g,"")}"\r
  SET PATHEXT=%PATHEXT:;.JS;=;%\r
)\r
\r
endLocal & goto #_undefined_# 2>NUL || title %COMSPEC% & "%_prog%" ${D} ${s} %*\r
`}else d=`${F}${t} ${D} ${s} %*\r
`;let m=`#!/bin/sh
`;m=m+`basedir=$(dirname "$(echo "$0" | sed -e 's,\\\\,/,g')")

case \`uname\` in
    *CYGWIN*|*MINGW*|*MSYS*) basedir=\`cygpath -w "$basedir"\`;;
esac

`,h?m=m+`if [ -x ${h} ]; then
  exec ${n}${h} ${D} ${i} "$@"
else 
  exec ${n}${o} ${D} ${i} "$@"
fi
`:m=m+`exec ${o} ${D} ${i} "$@"
`;let w=`#!/usr/bin/env pwsh
$basedir=Split-Path $MyInvocation.MyCommand.Definition -Parent

$exe=""
if ($PSVersionTable.PSVersion -lt "6.0" -or $IsWindows) {
  # Fix case when both the Windows and Linux builds of Node
  # are installed in the same directory
  $exe=".exe"
}
`;return h?w=w+`$ret=0
if (Test-Path ${g}) {
  # Support pipeline input
  if ($MyInvocation.ExpectingInput) {
    $input | & ${g} ${D} ${i} $args
  } else {
    & ${g} ${D} ${i} $args
  }
  $ret=$LASTEXITCODE
} else {
  # Support pipeline input
  if ($MyInvocation.ExpectingInput) {
    $input | & ${p} ${D} ${i} $args
  } else {
    & ${p} ${D} ${i} $args
  }
  $ret=$LASTEXITCODE
}
exit $ret
`:w=w+`# Support pipeline input
if ($MyInvocation.ExpectingInput) {
  $input | & ${p} ${D} ${i} $args
} else {
  & ${p} ${D} ${i} $args
}
exit $LASTEXITCODE
`,Promise.all([Ze(e+".ps1",w,"utf8"),Ze(e+".cmd",d,"utf8"),Ze(e,m,"utf8")]).then(()=>vn(e))},vn=u=>Promise.all([Ue(u,493),Ue(u+".cmd",493),Ue(u+".ps1",493)]);var Sn=Xe;Xe.ifExists=$n;var On=Nu(Sn);const zu=async u=>{const e=A.default.join(u,"package.json");if(!await oe(e))throw new Error(`package.json not found in ${u}`);const D=await Pu(e);if(!D.name)throw new Error(`package.json must contain a name: ${e}`);return D},Ju=async(u,e,t)=>{const D=await O.default.lstat(e).catch(()=>null);if(D){if(D.isSymbolicLink()){const n=await O.default.realpath(e).catch(()=>null);if(u===n)return}await O.default.rm(e,{recursive:!0})}await O.default.symlink(u,e,t)},kn=async(u,e)=>{await Ju(u,e),await O.default.chmod(e,493)},jn=async(u,e)=>{await oe(e)&&await O.default.rm(e,{recursive:!0}),await O.default.link(u,e)},xn=async(u,e,{name:t,bin:D},n)=>{if(!D)return[];t?.startsWith("@")&&([,t]=t.split("/"));const i=A.default.join(e,".bin");if(await O.default.mkdir(i,{recursive:!0}),typeof D=="string"){await n(A.default.resolve(u,D),A.default.join(i,t));return}await Promise.all(Object.entries(D).map(async([s,a])=>await n(A.default.resolve(u,a),A.default.join(i,s))))},Tn="node_modules",Rn=async(u,e)=>{const t=A.default.resolve(u,e),D=await zu(t),n=A.default.join(u,Tn),i=A.default.join(n,D.name),s=A.default.dirname(i);await O.default.mkdir(s,{recursive:!0});const a=A.default.relative(s,t);return await Ju(a,i,"dir"),await xn(t,n,D,process.platform==="win32"?On:kn),{name:D.name,path:i,target:a}},Vu=async(u,e,t)=>{const D=A.default.resolve(u,e);if(!await oe(D)){console.warn(Tu("\u2716"),`Package path does not exist: ${e}`),process.exitCode=1;return}try{const i=await Rn(u,e);console.log(Ru("\u2714"),`Symlinked ${Ve(i.name)}:`,ae(i.path),"\u2192",ae(i.target))}catch(i){console.warn(Tu("\u2716"),"Failed to symlink",ae(e),"with error:",i.message),process.exitCode=1;return}if(t.deep){const i=await Mu(D);i&&await Uu(D,i,t)}},Uu=async(u,e,t)=>{if(!e.packages)return;const D={deep:t.deep??e.deepLink??!1};await Promise.all(e.packages.map(async n=>await Vu(u,n,D)))};var Zu={},Pn=Hu;function Hu(u,e,t){u instanceof RegExp&&(u=Xu(u,t)),e instanceof RegExp&&(e=Xu(e,t));var D=Yu(u,e,t);return D&&{start:D[0],end:D[1],pre:t.slice(0,D[0]),body:t.slice(D[0]+u.length,D[1]),post:t.slice(D[1]+e.length)}}function Xu(u,e){var t=e.match(u);return t?t[0]:null}Hu.range=Yu;function Yu(u,e,t){var D,n,i,s,a,o=t.indexOf(u),h=t.indexOf(e,o+1),p=o;if(o>=0&&h>0){if(u===e)return[o,h];for(D=[],i=t.length;p>=0&&!a;)p==o?(D.push(p),o=t.indexOf(u,p+1)):D.length==1?a=[D.pop(),h]:(n=D.pop(),n<i&&(i=n,s=h),h=t.indexOf(e,p+1)),p=o<h&&o>=0?o:h;D.length&&(a=[i,s])}return a}var Ku=Pn,Ln=Nn,Qu="\0SLASH"+Math.random()+"\0",et="\0OPEN"+Math.random()+"\0",Ke="\0CLOSE"+Math.random()+"\0",ut="\0COMMA"+Math.random()+"\0",tt="\0PERIOD"+Math.random()+"\0";function Qe(u){return parseInt(u,10)==u?parseInt(u,10):u.charCodeAt(0)}function Mn(u){return u.split("\\\\").join(Qu).split("\\{").join(et).split("\\}").join(Ke).split("\\,").join(ut).split("\\.").join(tt)}function _n(u){return u.split(Qu).join("\\").split(et).join("{").split(Ke).join("}").split(ut).join(",").split(tt).join(".")}function Dt(u){if(!u)return[""];var e=[],t=Ku("{","}",u);if(!t)return u.split(",");var D=t.pre,n=t.body,i=t.post,s=D.split(",");s[s.length-1]+="{"+n+"}";var a=Dt(i);return i.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),e.push.apply(e,s),e}function Nn(u){return u?(u.substr(0,2)==="{}"&&(u="\\{\\}"+u.substr(2)),le(Mn(u),!0).map(_n)):[]}function In(u){return"{"+u+"}"}function Wn(u){return/^-?0\d/.test(u)}function Gn(u,e){return u<=e}function qn(u,e){return u>=e}function le(u,e){var t=[],D=Ku("{","}",u);if(!D)return[u];var n=D.pre,i=D.post.length?le(D.post,!1):[""];if(/\$$/.test(D.pre))for(var s=0;s<i.length;s++){var a=n+"{"+D.body+"}"+i[s];t.push(a)}else{var o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(D.body),h=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(D.body),p=o||h,g=D.body.indexOf(",")>=0;if(!p&&!g)return D.post.match(/,.*\}/)?(u=D.pre+"{"+D.body+Ke+D.post,le(u)):[u];var F;if(p)F=D.body.split(/\.\./);else if(F=Dt(D.body),F.length===1&&(F=le(F[0],!1).map(In),F.length===1))return i.map(function(ge){return D.pre+F[0]+ge});var d;if(p){var m=Qe(F[0]),w=Qe(F[1]),S=Math.max(F[0].length,F[1].length),R=F.length==3?Math.abs(Qe(F[2])):1,M=Gn,G=w<m;G&&(R*=-1,M=qn);var Re=F.some(Wn);d=[];for(var J=m;M(J,w);J+=R){var P;if(h)P=String.fromCharCode(J),P==="\\"&&(P="");else if(P=String(J),Re){var Ce=S-P.length;if(Ce>0){var Ee=new Array(Ce+1).join("0");J<0?P="-"+Ee+P.slice(1):P=Ee+P}}d.push(P)}}else{d=[];for(var I=0;I<F.length;I++)d.push.apply(d,le(F[I],!1))}for(var I=0;I<d.length;I++)for(var s=0;s<i.length;s++){var a=n+d[I]+i[s];(!e||p||a)&&t.push(a)}}return t}var be={};Object.defineProperty(be,"__esModule",{value:!0}),be.assertValidPattern=void 0;const zn=1024*64,Jn=u=>{if(typeof u!="string")throw new TypeError("invalid pattern");if(u.length>zn)throw new TypeError("pattern is too long")};be.assertValidPattern=Jn;var ce={},ve={};Object.defineProperty(ve,"__esModule",{value:!0}),ve.parseClass=void 0;const Vn={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},he=u=>u.replace(/[[\]\\-]/g,"\\$&"),Un=u=>u.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),nt=u=>u.join(""),Zn=(u,e)=>{const t=e;if(u.charAt(t)!=="[")throw new Error("not in a brace expression");const D=[],n=[];let i=t+1,s=!1,a=!1,o=!1,h=!1,p=t,g="";e:for(;i<u.length;){const w=u.charAt(i);if((w==="!"||w==="^")&&i===t+1){h=!0,i++;continue}if(w==="]"&&s&&!o){p=i+1;break}if(s=!0,w==="\\"&&!o){o=!0,i++;continue}if(w==="["&&!o){for(const[S,[R,M,G]]of Object.entries(Vn))if(u.startsWith(S,i)){if(g)return["$.",!1,u.length-t,!0];i+=S.length,G?n.push(R):D.push(R),a=a||M;continue e}}if(o=!1,g){w>g?D.push(he(g)+"-"+he(w)):w===g&&D.push(he(w)),g="",i++;continue}if(u.startsWith("-]",i+1)){D.push(he(w+"-")),i+=2;continue}if(u.startsWith("-",i+1)){g=w,i+=2;continue}D.push(he(w)),i++}if(p<i)return["",!1,0,!1];if(!D.length&&!n.length)return["$.",!1,u.length-t,!0];if(n.length===0&&D.length===1&&/^\\?.$/.test(D[0])&&!h){const w=D[0].length===2?D[0].slice(-1):D[0];return[Un(w),!1,p-t,!1]}const F="["+(h?"^":"")+nt(D)+"]",d="["+(h?"":"^")+nt(n)+"]";return[D.length&&n.length?"("+F+"|"+d+")":D.length?F:d,a,p-t,!0]};ve.parseClass=Zn;var Y={};Object.defineProperty(Y,"__esModule",{value:!0}),Y.unescape=void 0;const Hn=(u,{windowsPathsNoEscape:e=!1}={})=>e?u.replace(/\[([^\/\\])\]/g,"$1"):u.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");Y.unescape=Hn,Object.defineProperty(ce,"__esModule",{value:!0}),ce.AST=void 0;const Xn=ve,Se=Y,Yn=new Set(["!","?","+","*","@"]),it=u=>Yn.has(u),Kn="(?!(?:^|/)\\.\\.?(?:$|/))",Oe="(?!\\.)",Qn=new Set(["[","."]),ei=new Set(["..","."]),ui=new Set("().*{}+?[]^$\\!"),ti=u=>u.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),eu="[^/]",st=eu+"*?",rt=eu+"+?";class T{type;#t;#D;#n=!1;#e=[];#u;#s;#a;#r=!1;#i;#o;#c=!1;constructor(e,t,D={}){this.type=e,e&&(this.#D=!0),this.#u=t,this.#t=this.#u?this.#u.#t:this,this.#i=this.#t===this?D:this.#t.#i,this.#a=this.#t===this?[]:this.#t.#a,e==="!"&&!this.#t.#r&&this.#a.push(this),this.#s=this.#u?this.#u.#e.length:0}get hasMagic(){if(this.#D!==void 0)return this.#D;for(const e of this.#e)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#D=!0;return this.#D}toString(){return this.#o!==void 0?this.#o:this.type?this.#o=this.type+"("+this.#e.map(e=>String(e)).join("|")+")":this.#o=this.#e.map(e=>String(e)).join("")}#f(){if(this!==this.#t)throw new Error("should only call on root");if(this.#r)return this;this.toString(),this.#r=!0;let e;for(;e=this.#a.pop();){if(e.type!=="!")continue;let t=e,D=t.#u;for(;D;){for(let n=t.#s+1;!D.type&&n<D.#e.length;n++)for(const i of e.#e){if(typeof i=="string")throw new Error("string part in extglob AST??");i.copyIn(D.#e[n])}t=D,D=t.#u}}return this}push(...e){for(const t of e)if(t!==""){if(typeof t!="string"&&!(t instanceof T&&t.#u===this))throw new Error("invalid part: "+t);this.#e.push(t)}}toJSON(){const e=this.type===null?this.#e.slice().map(t=>typeof t=="string"?t:t.toJSON()):[this.type,...this.#e.map(t=>t.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#t||this.#t.#r&&this.#u?.type==="!")&&e.push({}),e}isStart(){if(this.#t===this)return!0;if(!this.#u?.isStart())return!1;if(this.#s===0)return!0;const e=this.#u;for(let t=0;t<this.#s;t++){const D=e.#e[t];if(!(D instanceof T&&D.type==="!"))return!1}return!0}isEnd(){if(this.#t===this||this.#u?.type==="!")return!0;if(!this.#u?.isEnd())return!1;if(!this.type)return this.#u?.isEnd();const e=this.#u?this.#u.#e.length:0;return this.#s===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){const t=new T(this.type,e);for(const D of this.#e)t.copyIn(D);return t}static#l(e,t,D,n){let i=!1,s=!1,a=-1,o=!1;if(t.type===null){let d=D,m="";for(;d<e.length;){const w=e.charAt(d++);if(i||w==="\\"){i=!i,m+=w;continue}if(s){d===a+1?(w==="^"||w==="!")&&(o=!0):w==="]"&&!(d===a+2&&o)&&(s=!1),m+=w;continue}else if(w==="["){s=!0,a=d,o=!1,m+=w;continue}if(!n.noext&&it(w)&&e.charAt(d)==="("){t.push(m),m="";const S=new T(w,t);d=T.#l(e,S,d,n),t.push(S);continue}m+=w}return t.push(m),d}let h=D+1,p=new T(null,t);const g=[];let F="";for(;h<e.length;){const d=e.charAt(h++);if(i||d==="\\"){i=!i,F+=d;continue}if(s){h===a+1?(d==="^"||d==="!")&&(o=!0):d==="]"&&!(h===a+2&&o)&&(s=!1),F+=d;continue}else if(d==="["){s=!0,a=h,o=!1,F+=d;continue}if(it(d)&&e.charAt(h)==="("){p.push(F),F="";const m=new T(d,p);p.push(m),h=T.#l(e,m,h,n);continue}if(d==="|"){p.push(F),F="",g.push(p),p=new T(null,t);continue}if(d===")")return F===""&&t.#e.length===0&&(t.#c=!0),p.push(F),F="",t.push(...g,p),h;F+=d}return t.type=null,t.#D=void 0,t.#e=[e.substring(D-1)],h}static fromGlob(e,t={}){const D=new T(null,void 0,t);return T.#l(e,D,0,t),D}toMMPattern(){if(this!==this.#t)return this.#t.toMMPattern();const e=this.toString(),[t,D,n,i]=this.toRegExpSource();if(!(n||this.#D||this.#i.nocase&&!this.#i.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return D;const a=(this.#i.nocase?"i":"")+(i?"u":"");return Object.assign(new RegExp(`^${t}$`,a),{_src:t,_glob:e})}toRegExpSource(e){const t=e??!!this.#i.dot;if(this.#t===this&&this.#f(),!this.type){const o=this.isStart()&&this.isEnd(),h=this.#e.map(d=>{const[m,w,S,R]=typeof d=="string"?T.#p(d,this.#D,o):d.toRegExpSource(e);return this.#D=this.#D||S,this.#n=this.#n||R,m}).join("");let p="";if(this.isStart()&&typeof this.#e[0]=="string"&&!(this.#e.length===1&&ei.has(this.#e[0]))){const m=Qn,w=t&&m.has(h.charAt(0))||h.startsWith("\\.")&&m.has(h.charAt(2))||h.startsWith("\\.\\.")&&m.has(h.charAt(4)),S=!t&&!e&&m.has(h.charAt(0));p=w?Kn:S?Oe:""}let g="";return this.isEnd()&&this.#t.#r&&this.#u?.type==="!"&&(g="(?:$|\\/)"),[p+h+g,(0,Se.unescape)(h),this.#D=!!this.#D,this.#n]}const D=this.type==="*"||this.type==="+",n=this.type==="!"?"(?:(?!(?:":"(?:";let i=this.#h(t);if(this.isStart()&&this.isEnd()&&!i&&this.type!=="!"){const o=this.toString();return this.#e=[o],this.type=null,this.#D=void 0,[o,(0,Se.unescape)(this.toString()),!1,!1]}let s=!D||e||t||!Oe?"":this.#h(!0);s===i&&(s=""),s&&(i=`(?:${i})(?:${s})*?`);let a="";if(this.type==="!"&&this.#c)a=(this.isStart()&&!t?Oe:"")+rt;else{const o=this.type==="!"?"))"+(this.isStart()&&!t&&!e?Oe:"")+st+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&s?")":this.type==="*"&&s?")?":`)${this.type}`;a=n+i+o}return[a,(0,Se.unescape)(i),this.#D=!!this.#D,this.#n]}#h(e){return this.#e.map(t=>{if(typeof t=="string")throw new Error("string type in extglob ast??");const[D,n,i,s]=t.toRegExpSource(e);return this.#n=this.#n||s,D}).filter(t=>!(this.isStart()&&this.isEnd())||!!t).join("|")}static#p(e,t,D=!1){let n=!1,i="",s=!1;for(let a=0;a<e.length;a++){const o=e.charAt(a);if(n){n=!1,i+=(ui.has(o)?"\\":"")+o;continue}if(o==="\\"){a===e.length-1?i+="\\\\":n=!0;continue}if(o==="["){const[h,p,g,F]=(0,Xn.parseClass)(e,a);if(g){i+=h,s=s||p,a+=g-1,t=t||F;continue}}if(o==="*"){D&&e==="*"?i+=rt:i+=st,t=!0;continue}if(o==="?"){i+=eu,t=!0;continue}i+=ti(o)}return[i,(0,Se.unescape)(e),!!t,s]}}ce.AST=T;var fe={};Object.defineProperty(fe,"__esModule",{value:!0}),fe.escape=void 0;const Di=(u,{windowsPathsNoEscape:e=!1}={})=>e?u.replace(/[?*()[\]]/g,"[$&]"):u.replace(/[?*()[\]\\]/g,"\\$&");fe.escape=Di,function(u){var e=_u&&_u.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(u,"__esModule",{value:!0}),u.unescape=u.escape=u.AST=u.Minimatch=u.match=u.makeRe=u.braceExpand=u.defaults=u.filter=u.GLOBSTAR=u.sep=u.minimatch=void 0;const t=e(Ln),D=be,n=ce,i=fe,s=Y,a=(C,r,l={})=>((0,D.assertValidPattern)(r),!l.nocomment&&r.charAt(0)==="#"?!1:new ue(r,l).match(C));u.minimatch=a;const o=/^\*+([^+@!?\*\[\(]*)$/,h=C=>r=>!r.startsWith(".")&&r.endsWith(C),p=C=>r=>r.endsWith(C),g=C=>(C=C.toLowerCase(),r=>!r.startsWith(".")&&r.toLowerCase().endsWith(C)),F=C=>(C=C.toLowerCase(),r=>r.toLowerCase().endsWith(C)),d=/^\*+\.\*+$/,m=C=>!C.startsWith(".")&&C.includes("."),w=C=>C!=="."&&C!==".."&&C.includes("."),S=/^\.\*+$/,R=C=>C!=="."&&C!==".."&&C.startsWith("."),M=/^\*+$/,G=C=>C.length!==0&&!C.startsWith("."),Re=C=>C.length!==0&&C!=="."&&C!=="..",J=/^\?+([^+@!?\*\[\(]*)?$/,P=([C,r=""])=>{const l=ge([C]);return r?(r=r.toLowerCase(),c=>l(c)&&c.toLowerCase().endsWith(r)):l},Ce=([C,r=""])=>{const l=tu([C]);return r?(r=r.toLowerCase(),c=>l(c)&&c.toLowerCase().endsWith(r)):l},Ee=([C,r=""])=>{const l=tu([C]);return r?c=>l(c)&&c.endsWith(r):l},I=([C,r=""])=>{const l=ge([C]);return r?c=>l(c)&&c.endsWith(r):l},ge=([C])=>{const r=C.length;return l=>l.length===r&&!l.startsWith(".")},tu=([C])=>{const r=C.length;return l=>l.length===r&&l!=="."&&l!==".."},Du=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",nu={win32:{sep:"\\"},posix:{sep:"/"}};u.sep=Du==="win32"?nu.win32.sep:nu.posix.sep,u.minimatch.sep=u.sep,u.GLOBSTAR=Symbol("globstar **"),u.minimatch.GLOBSTAR=u.GLOBSTAR;const Ft="[^/]"+"*?",dt="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Ct="(?:(?!(?:\\/|^)\\.).)*?",Et=(C,r={})=>l=>(0,u.minimatch)(l,C,r);u.filter=Et,u.minimatch.filter=u.filter;const L=(C,r={})=>Object.assign({},C,r),gt=C=>{if(!C||typeof C!="object"||!Object.keys(C).length)return u.minimatch;const r=u.minimatch;return Object.assign((c,f,E={})=>r(c,f,L(C,E)),{Minimatch:class extends r.Minimatch{constructor(f,E={}){super(f,L(C,E))}static defaults(f){return r.defaults(L(C,f)).Minimatch}},AST:class extends r.AST{constructor(f,E,B={}){super(f,E,L(C,B))}static fromGlob(f,E={}){return r.AST.fromGlob(f,L(C,E))}},unescape:(c,f={})=>r.unescape(c,L(C,f)),escape:(c,f={})=>r.escape(c,L(C,f)),filter:(c,f={})=>r.filter(c,L(C,f)),defaults:c=>r.defaults(L(C,c)),makeRe:(c,f={})=>r.makeRe(c,L(C,f)),braceExpand:(c,f={})=>r.braceExpand(c,L(C,f)),match:(c,f,E={})=>r.match(c,f,L(C,E)),sep:r.sep,GLOBSTAR:u.GLOBSTAR})};u.defaults=gt,u.minimatch.defaults=u.defaults;const mt=(C,r={})=>((0,D.assertValidPattern)(C),r.nobrace||!/\{(?:(?!\{).)*\}/.test(C)?[C]:(0,t.default)(C));u.braceExpand=mt,u.minimatch.braceExpand=u.braceExpand;const Bt=(C,r={})=>new ue(C,r).makeRe();u.makeRe=Bt,u.minimatch.makeRe=u.makeRe;const wt=(C,r,l={})=>{const c=new ue(r,l);return C=C.filter(f=>c.match(f)),c.options.nonull&&!C.length&&C.push(r),C};u.match=wt,u.minimatch.match=u.match;const iu=/[?*]|[+@!]\(.*?\)|\[|\]/,yt=C=>C.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");class ue{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(r,l={}){(0,D.assertValidPattern)(r),l=l||{},this.options=l,this.pattern=r,this.platform=l.platform||Du,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!l.windowsPathsNoEscape||l.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!l.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!l.nonegate,this.comment=!1,this.empty=!1,this.partial=!!l.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=l.windowsNoMagicRoot!==void 0?l.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(const r of this.set)for(const l of r)if(typeof l!="string")return!0;return!1}debug(...r){}make(){const r=this.pattern,l=this.options;if(!l.nocomment&&r.charAt(0)==="#"){this.comment=!0;return}if(!r){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],l.debug&&(this.debug=(...E)=>console.error(...E)),this.debug(this.pattern,this.globSet);const c=this.globSet.map(E=>this.slashSplit(E));this.globParts=this.preprocess(c),this.debug(this.pattern,this.globParts);let f=this.globParts.map((E,B,y)=>{if(this.isWindows&&this.windowsNoMagicRoot){const b=E[0]===""&&E[1]===""&&(E[2]==="?"||!iu.test(E[2]))&&!iu.test(E[3]),v=/^[a-z]:/i.test(E[0]);if(b)return[...E.slice(0,4),...E.slice(4).map($=>this.parse($))];if(v)return[E[0],...E.slice(1).map($=>this.parse($))]}return E.map(b=>this.parse(b))});if(this.debug(this.pattern,f),this.set=f.filter(E=>E.indexOf(!1)===-1),this.isWindows)for(let E=0;E<this.set.length;E++){const B=this.set[E];B[0]===""&&B[1]===""&&this.globParts[E][2]==="?"&&typeof B[3]=="string"&&/^[a-z]:$/i.test(B[3])&&(B[2]="?")}this.debug(this.pattern,this.set)}preprocess(r){if(this.options.noglobstar)for(let c=0;c<r.length;c++)for(let f=0;f<r[c].length;f++)r[c][f]==="**"&&(r[c][f]="*");const{optimizationLevel:l=1}=this.options;return l>=2?(r=this.firstPhasePreProcess(r),r=this.secondPhasePreProcess(r)):l>=1?r=this.levelOneOptimize(r):r=this.adjascentGlobstarOptimize(r),r}adjascentGlobstarOptimize(r){return r.map(l=>{let c=-1;for(;(c=l.indexOf("**",c+1))!==-1;){let f=c;for(;l[f+1]==="**";)f++;f!==c&&l.splice(c,f-c)}return l})}levelOneOptimize(r){return r.map(l=>(l=l.reduce((c,f)=>{const E=c[c.length-1];return f==="**"&&E==="**"?c:f===".."&&E&&E!==".."&&E!=="."&&E!=="**"?(c.pop(),c):(c.push(f),c)},[]),l.length===0?[""]:l))}levelTwoFileOptimize(r){Array.isArray(r)||(r=this.slashSplit(r));let l=!1;do{if(l=!1,!this.preserveMultipleSlashes){for(let f=1;f<r.length-1;f++){const E=r[f];f===1&&E===""&&r[0]===""||(E==="."||E==="")&&(l=!0,r.splice(f,1),f--)}r[0]==="."&&r.length===2&&(r[1]==="."||r[1]==="")&&(l=!0,r.pop())}let c=0;for(;(c=r.indexOf("..",c+1))!==-1;){const f=r[c-1];f&&f!=="."&&f!==".."&&f!=="**"&&(l=!0,r.splice(c-1,2),c-=2)}}while(l);return r.length===0?[""]:r}firstPhasePreProcess(r){let l=!1;do{l=!1;for(let c of r){let f=-1;for(;(f=c.indexOf("**",f+1))!==-1;){let B=f;for(;c[B+1]==="**";)B++;B>f&&c.splice(f+1,B-f);let y=c[f+1];const b=c[f+2],v=c[f+3];if(y!==".."||!b||b==="."||b===".."||!v||v==="."||v==="..")continue;l=!0,c.splice(f,1);const $=c.slice(0);$[f]="**",r.push($),f--}if(!this.preserveMultipleSlashes){for(let B=1;B<c.length-1;B++){const y=c[B];B===1&&y===""&&c[0]===""||(y==="."||y==="")&&(l=!0,c.splice(B,1),B--)}c[0]==="."&&c.length===2&&(c[1]==="."||c[1]==="")&&(l=!0,c.pop())}let E=0;for(;(E=c.indexOf("..",E+1))!==-1;){const B=c[E-1];if(B&&B!=="."&&B!==".."&&B!=="**"){l=!0;const b=E===1&&c[E+1]==="**"?["."]:[];c.splice(E-1,2,...b),c.length===0&&c.push(""),E-=2}}}}while(l);return r}secondPhasePreProcess(r){for(let l=0;l<r.length-1;l++)for(let c=l+1;c<r.length;c++){const f=this.partsMatch(r[l],r[c],!this.preserveMultipleSlashes);f&&(r[l]=f,r[c]=[])}return r.filter(l=>l.length)}partsMatch(r,l,c=!1){let f=0,E=0,B=[],y="";for(;f<r.length&&E<l.length;)if(r[f]===l[E])B.push(y==="b"?l[E]:r[f]),f++,E++;else if(c&&r[f]==="**"&&l[E]===r[f+1])B.push(r[f]),f++;else if(c&&l[E]==="**"&&r[f]===l[E+1])B.push(l[E]),E++;else if(r[f]==="*"&&l[E]&&(this.options.dot||!l[E].startsWith("."))&&l[E]!=="**"){if(y==="b")return!1;y="a",B.push(r[f]),f++,E++}else if(l[E]==="*"&&r[f]&&(this.options.dot||!r[f].startsWith("."))&&r[f]!=="**"){if(y==="a")return!1;y="b",B.push(l[E]),f++,E++}else return!1;return r.length===l.length&&B}parseNegate(){if(this.nonegate)return;const r=this.pattern;let l=!1,c=0;for(let f=0;f<r.length&&r.charAt(f)==="!";f++)l=!l,c++;c&&(this.pattern=r.slice(c)),this.negate=l}matchOne(r,l,c=!1){const f=this.options;if(this.isWindows){const q=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),vt=!q&&r[0]===""&&r[1]===""&&r[2]==="?"&&/^[a-z]:$/i.test(r[3]),su=typeof l[0]=="string"&&/^[a-z]:$/i.test(l[0]),St=!su&&l[0]===""&&l[1]===""&&l[2]==="?"&&typeof l[3]=="string"&&/^[a-z]:$/i.test(l[3]),De=vt?3:q?0:void 0,Z=St?3:su?0:void 0;if(typeof De=="number"&&typeof Z=="number"){const[ru,Ot]=[r[De],l[Z]];ru.toLowerCase()===Ot.toLowerCase()&&(l[Z]=ru,Z>De?l=l.slice(Z):De>Z&&(r=r.slice(De)))}}const{optimizationLevel:E=1}=this.options;E>=2&&(r=this.levelTwoFileOptimize(r)),this.debug("matchOne",this,{file:r,pattern:l}),this.debug("matchOne",r.length,l.length);for(var B=0,y=0,b=r.length,v=l.length;B<b&&y<v;B++,y++){this.debug("matchOne loop");var $=l[y],k=r[B];if(this.debug(l,$,k),$===!1)return!1;if($===u.GLOBSTAR){this.debug("GLOBSTAR",[l,$,k]);var j=B,_=y+1;if(_===v){for(this.debug("** at the end");B<b;B++)if(r[B]==="."||r[B]===".."||!f.dot&&r[B].charAt(0)===".")return!1;return!0}for(;j<b;){var te=r[j];if(this.debug(`
globstar while`,r,j,l,_,te),this.matchOne(r.slice(j),l.slice(_),c))return this.debug("globstar found match!",j,b,te),!0;if(te==="."||te===".."||!f.dot&&te.charAt(0)==="."){this.debug("dot detected!",r,j,l,_);break}this.debug("globstar swallow a segment, and continue"),j++}return!!(c&&(this.debug(`
>>> no match, partial?`,r,j,l,_),j===b))}let q;if(typeof $=="string"?(q=k===$,this.debug("string match",$,k,q)):(q=$.test(k),this.debug("pattern match",$,k,q)),!q)return!1}if(B===b&&y===v)return!0;if(B===b)return c;if(y===v)return B===b-1&&r[B]==="";throw new Error("wtf?")}braceExpand(){return(0,u.braceExpand)(this.pattern,this.options)}parse(r){(0,D.assertValidPattern)(r);const l=this.options;if(r==="**")return u.GLOBSTAR;if(r==="")return"";let c,f=null;(c=r.match(M))?f=l.dot?Re:G:(c=r.match(o))?f=(l.nocase?l.dot?F:g:l.dot?p:h)(c[1]):(c=r.match(J))?f=(l.nocase?l.dot?Ce:P:l.dot?Ee:I)(c):(c=r.match(d))?f=l.dot?w:m:(c=r.match(S))&&(f=R);const E=n.AST.fromGlob(r,this.options).toMMPattern();return f?Object.assign(E,{test:f}):E}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;const r=this.set;if(!r.length)return this.regexp=!1,this.regexp;const l=this.options,c=l.noglobstar?Ft:l.dot?dt:Ct,f=new Set(l.nocase?["i"]:[]);let E=r.map(b=>{const v=b.map($=>{if($ instanceof RegExp)for(const k of $.flags.split(""))f.add(k);return typeof $=="string"?yt($):$===u.GLOBSTAR?u.GLOBSTAR:$._src});return v.forEach(($,k)=>{const j=v[k+1],_=v[k-1];$!==u.GLOBSTAR||_===u.GLOBSTAR||(_===void 0?j!==void 0&&j!==u.GLOBSTAR?v[k+1]="(?:\\/|"+c+"\\/)?"+j:v[k]=c:j===void 0?v[k-1]=_+"(?:\\/|"+c+")?":j!==u.GLOBSTAR&&(v[k-1]=_+"(?:\\/|\\/"+c+"\\/)"+j,v[k+1]=u.GLOBSTAR))}),v.filter($=>$!==u.GLOBSTAR).join("/")}).join("|");const[B,y]=r.length>1?["(?:",")"]:["",""];E="^"+B+E+y+"$",this.negate&&(E="^(?!"+E+").+$");try{this.regexp=new RegExp(E,[...f].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(r){return this.preserveMultipleSlashes?r.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(r)?["",...r.split(/\/+/)]:r.split(/\/+/)}match(r,l=this.partial){if(this.debug("match",r,this.pattern),this.comment)return!1;if(this.empty)return r==="";if(r==="/"&&l)return!0;const c=this.options;this.isWindows&&(r=r.split("\\").join("/"));const f=this.slashSplit(r);this.debug(this.pattern,"split",f);const E=this.set;this.debug(this.pattern,"set",E);let B=f[f.length-1];if(!B)for(let y=f.length-2;!B&&y>=0;y--)B=f[y];for(let y=0;y<E.length;y++){const b=E[y];let v=f;if(c.matchBase&&b.length===1&&(v=[B]),this.matchOne(v,b,l))return c.flipNegate?!0:!this.negate}return c.flipNegate?!1:this.negate}static defaults(r){return u.minimatch.defaults(r).Minimatch}}u.Minimatch=ue;var $t=ce;Object.defineProperty(u,"AST",{enumerable:!0,get:function(){return $t.AST}});var At=fe;Object.defineProperty(u,"escape",{enumerable:!0,get:function(){return At.escape}});var bt=Y;Object.defineProperty(u,"unescape",{enumerable:!0,get:function(){return bt.unescape}}),u.minimatch.AST=n.AST,u.minimatch.Minimatch=ue,u.minimatch.escape=i.escape,u.minimatch.unescape=s.unescape}(Zu);const z=au.default,uu=A.default,ni=Lt.default.EventEmitter,ii=Zu.Minimatch;class Fe extends ni{constructor(e){e=e||{},super(e),this.isSymbolicLink=e.isSymbolicLink,this.path=e.path||process.cwd(),this.basename=uu.basename(this.path),this.ignoreFiles=e.ignoreFiles||[".ignore"],this.ignoreRules={},this.parent=e.parent||null,this.includeEmpty=!!e.includeEmpty,this.root=this.parent?this.parent.root:this.path,this.follow=!!e.follow,this.result=this.parent?this.parent.result:new Set,this.entries=null,this.sawError=!1}sort(e,t){return e.localeCompare(t,"en")}emit(e,t){let D=!1;return this.sawError&&e==="error"||(e==="error"?this.sawError=!0:e==="done"&&!this.parent&&(t=Array.from(t).map(n=>/^@/.test(n)?`./${n}`:n).sort(this.sort),this.result=t),e==="error"&&this.parent?D=this.parent.emit("error",t):D=super.emit(e,t)),D}start(){return z.readdir(this.path,(e,t)=>e?this.emit("error",e):this.onReaddir(t)),this}isIgnoreFile(e){return e!=="."&&e!==".."&&this.ignoreFiles.indexOf(e)!==-1}onReaddir(e){this.entries=e,e.length===0?(this.includeEmpty&&this.result.add(this.path.slice(this.root.length+1)),this.emit("done",this.result)):this.entries.some(D=>this.isIgnoreFile(D))?this.addIgnoreFiles():this.filterEntries()}addIgnoreFiles(){const e=this.entries.filter(n=>this.isIgnoreFile(n));let t=e.length;const D=n=>{--t===0&&this.filterEntries()};e.forEach(n=>this.addIgnoreFile(n,D))}addIgnoreFile(e,t){const D=uu.resolve(this.path,e);z.readFile(D,"utf8",(n,i)=>n?this.emit("error",n):this.onReadIgnoreFile(e,i,t))}onReadIgnoreFile(e,t,D){const n={matchBase:!0,dot:!0,flipNegate:!0,nocase:!0},i=t.split(/\r?\n/).filter(s=>!/^#|^$/.test(s.trim())).map(s=>new ii(s.trim(),n));this.ignoreRules[e]=i,D()}filterEntries(){const e=this.entries.map(D=>{const n=this.filterEntry(D),i=this.filterEntry(D,!0);return n||i?[D,n,i]:!1}).filter(D=>D);let t=e.length;if(t===0)this.emit("done",this.result);else{const D=n=>{--t===0&&this.emit("done",this.result)};e.forEach(n=>{const i=n[0],s=n[1],a=n[2];this.stat({entry:i,file:s,dir:a},D)})}}onstat({st:e,entry:t,file:D,dir:n,isSymbolicLink:i},s){const a=this.path+"/"+t;e.isDirectory()?n?this.walker(t,{isSymbolicLink:i},s):s():(D&&this.result.add(a.slice(this.root.length+1)),s())}stat({entry:e,file:t,dir:D},n){const i=this.path+"/"+e;z.lstat(i,(s,a)=>{if(s)this.emit("error",s);else{const o=a.isSymbolicLink();this.follow&&o?z.stat(i,(h,p)=>{h?this.emit("error",h):this.onstat({st:p,entry:e,file:t,dir:D,isSymbolicLink:o},n)}):this.onstat({st:a,entry:e,file:t,dir:D,isSymbolicLink:o},n)}})}walkerOpt(e,t){return{path:this.path+"/"+e,parent:this,ignoreFiles:this.ignoreFiles,follow:this.follow,includeEmpty:this.includeEmpty,...t}}walker(e,t,D){new Fe(this.walkerOpt(e,t)).on("done",D).start()}filterEntry(e,t){let D=!0;if(this.parent&&this.parent.filterEntry){var n=this.basename+"/"+e;D=this.parent.filterEntry(n,t)}return this.ignoreFiles.forEach(i=>{this.ignoreRules[i]&&this.ignoreRules[i].forEach(s=>{s.negate!==D&&(s.match("/"+e)||s.match(e)||t&&(s.match("/"+e+"/")||s.match(e+"/"))||t&&s.negate&&(s.match("/"+e,!0)||s.match(e,!0)))&&(D=s.negate)})}),D}}class Te extends Fe{start(){return this.onReaddir(z.readdirSync(this.path)),this}addIgnoreFile(e,t){const D=uu.resolve(this.path,e);this.onReadIgnoreFile(e,z.readFileSync(D,"utf8"),t)}stat({entry:e,file:t,dir:D},n){const i=this.path+"/"+e;let s=z.lstatSync(i);const a=s.isSymbolicLink();this.follow&&a&&(s=z.statSync(i)),this.onstat({st:s,entry:e,file:t,dir:D,isSymbolicLink:a},n)}walker(e,t,D){new Te(this.walkerOpt(e,t)).start(),D()}}const ke=(u,e)=>{const t=new Promise((D,n)=>{new Fe(u).on("done",D).on("error",n).start()});return e?t.then(D=>e(null,D),e):t},si=u=>new Te(u).start().result;var ri=ke;ke.sync=si,ke.Walker=Fe,ke.WalkerSync=Te;const{Walker:ai}=ri,{lstatSync:oi,readFileSync:li}=au.default,{basename:at,dirname:ci,extname:ot,join:K,relative:Q,resolve:hi,sep:fi}=A.default,pe=Symbol("npm-packlist.rules.default"),ee=Symbol("npm-packlist.rules.strict"),pi=u=>/\*/.test(u),Fi=[".npmignore",".gitignore","**/.git","**/.svn","**/.hg","**/CVS","**/.git/**","**/.svn/**","**/.hg/**","**/CVS/**","/.lock-wscript","/.wafpickle-*","/build/config.gypi","npm-debug.log","**/.npmrc",".*.swp",".DS_Store","**/.DS_Store/**","._*","**/._*/**","*.orig","/archived-packages/**"],lt=["/.git"],je=["!/readme{,.*[^~$]}","!/copying{,.*[^~$]}","!/license{,.*[^~$]}","!/licence{,.*[^~$]}"],di=[/^!.*readme/i,/^!.*copying/i,/^!.*licen[sc]e/i],xe=u=>u.split("\\").join("/"),ct=(u,e,t=[])=>{for(const s of[".npmignore",".gitignore"])try{const a=li(K(u,s),{encoding:"utf8"});t.push(a);break}catch(a){if(a.code!=="ENOENT")throw a}if(!e)return t;const D=e.split(fi,1)[0],n=K(u,D),i=Q(n,K(u,e));return ct(n,i,t)};class de extends ai{constructor(e,t){const D={...t,includeEmpty:!1,follow:!1,path:hi(t?.path||e.path).replace(/\\/g,"/"),ignoreFiles:t?.ignoreFiles||[pe,"package.json",".npmignore",".gitignore",ee]};super(D),this.isPackage=D.isPackage,this.seen=D.seen||new Set,this.tree=e,this.requiredFiles=D.requiredFiles||[];const n=[];if(D.prefix&&D.workspaces){const i=xe(D.path),s=xe(D.prefix),a=D.workspaces.map(o=>xe(o));if(i!==s&&a.includes(i)){const o=Q(D.prefix,ci(D.path));n.push(...ct(D.prefix,o))}else i===s&&n.push(...a.map(o=>xe(Q(D.path,o))))}this.injectRules(pe,[...Fi,...n]),this.isPackage||this.injectRules(ee,[...lt,...je,...this.requiredFiles.map(i=>`!${i}`)])}addIgnoreFile(e,t){return e!=="package.json"||!this.isPackage?super.addIgnoreFile(e,t):this.processPackage(t)}emit(e,t){return e!=="done"||!this.isPackage?super.emit(e,t):(this.gatherBundles().then(()=>{super.emit("done",this.result)}),!0)}filterEntries(){return this.ignoreRules["package.json"]?(this.ignoreRules[".npmignore"]=null,this.ignoreRules[".gitignore"]=null):this.ignoreRules[".npmignore"]&&(this.ignoreRules[".gitignore"]=null),super.filterEntries()}onstat(e,t){return!e.st.isFile()&&!e.st.isDirectory()?t():super.onstat(e,t)}stat(e,t){return pi(e.entry)?t():super.stat(e,t)}walkerOpt(e,t){let D=null;if(this.tree.workspaces){const n=[...this.tree.workspaces.values()].map(s=>s.replace(/\\/g,"/")),i=K(this.path,e).replace(/\\/g,"/");n.includes(i)&&(D=[pe,"package.json",".npmignore",".gitignore",ee])}else D=[pe,".npmignore",".gitignore",ee];return{...super.walkerOpt(e,t),ignoreFiles:D,requiredFiles:this.requiredFiles.map(n=>Q(n,e)===".."?Q(e,n).replace(/\\/g,"/"):!1).filter(Boolean)}}walker(e,t,D){new de(this.tree,this.walkerOpt(e,t)).on("done",D).start()}sort(e,t){const D=ot(e).toLowerCase(),n=ot(t).toLowerCase(),i=at(e).toLowerCase(),s=at(t).toLowerCase();return D.localeCompare(n,"en")||i.localeCompare(s,"en")||e.localeCompare(t,"en")}injectRules(e,t,D=()=>{}){this.onReadIgnoreFile(e,`${t.join(`
`)}
`,D)}processPackage(e){const{bin:t,browser:D,files:n,main:i}=this.tree.package,s=[],a=[...lt,...je,"!/package.json","/.git","/node_modules","/package-lock.json","/yarn.lock","/pnpm-lock.yaml"];if(n){for(let o of n){o.startsWith("/")?o=o.slice(1):o.startsWith("./")?o=o.slice(2):o.endsWith("/*")&&(o=o.slice(0,-2));const h=`!${o}`;this.excludeNonRoot(o);try{const p=oi(K(this.path,o.replace(/^!+/,"")).replace(/\\/g,"/"));p.isFile()?(a.unshift(h),this.requiredFiles.push(o)):p.isDirectory()&&(s.push(h),s.push(`${h}/**`))}catch{s.push(h)}}this.injectRules("package.json",["*",...s])}if(D&&a.push(`!/${D}`),i&&a.push(`!/${i}`),t)for(const o in t)a.push(`!/${t[o]}`);this.injectRules(ee,a,e)}excludeNonRoot(e){const t=di.find(D=>D.test(e));if(t){const D=je.findIndex(n=>t.test(n));je.splice(D,1)}}async gatherBundles(){if(this.seen.has(this.tree))return;this.seen.add(this.tree);let e;if(this.tree.isProjectRoot){const{bundleDependencies:t}=this.tree.package;e=t||[]}else{const{dependencies:t,optionalDependencies:D}=this.tree.package;e=Object.keys(t||{}).concat(Object.keys(D||{}))}for(const t of e){const D=this.tree.edgesOut.get(t);if(!D||D.peer||D.dev)continue;const n=this.tree.edgesOut.get(t).to;if(!n)continue;const i=n.path,s=n.target,a={path:i,isPackage:!0,ignoreFiles:[],seen:this.seen};n.isLink&&a.ignoreFiles.push(pe),a.ignoreFiles.push("package.json"),n.isLink&&(a.ignoreFiles.push(".npmignore"),a.ignoreFiles.push(".gitignore")),a.ignoreFiles.push(ee);const o=new de(s,a),h=await new Promise((g,F)=>{o.on("error",F),o.on("done",g),o.start()}),p=Q(this.root,o.path);for(const g of h)this.result.add(K(p,g).replace(/\\/g,"/"))}}}const ht=(u,e,t)=>{typeof e=="function"&&(t=e,e={});const D=new Promise((n,i)=>{new de(u,{...e,isPackage:!0}).on("done",n).on("error",i).start()});return t?D.then(n=>t(null,n),t):D};var Ci=ht;ht.Walker=de;var ft=Nu(Ci);const Ei=async(u,e)=>{const t=A.default.resolve(u,e),D=await zu(t),n=A.default.join(u,"node_modules/"),i=A.default.join(n,D.name);if((await O.default.stat(i).catch(()=>null))?.isDirectory()){const a=await O.default.realpath(i);if(a.startsWith(n)){const o=new Map,[h,p]=await Promise.all([ft({path:a,package:D,edgesOut:o}),ft({path:t,package:D,edgesOut:o})]);console.log(`Symlinking ${Ve(D.name)}:`),await Promise.all(p.map(async g=>{const F=A.default.join(t,g),d=A.default.join(i,g);await O.default.mkdir(A.default.dirname(d),{recursive:!0}),await jn(F,d);const m=h.indexOf(g);m>-1&&h.splice(m,1),console.log(`  ${Ru("\u2714")}`,ae(A.default.relative(u,d)),"\u2192",ae(A.default.relative(u,F)))})),await Promise.all(h.map(async g=>{const F=A.default.join(i,g);await O.default.rm(F)}));return}}console.error(W`
		Error: Package ${Ve(D.name)} is not set up

		${fn("Setup instructions")}
		1. In the Dependency package, create a tarball:
			${Je("$ npm pack")}

		2. In the Consuming package, install the tarball and link the Dependency:
			${Je("$ npm install --no-save <dependency-tarball>")}
			${Je("$ npx link publish <dependency-path>")}

		3. Start developing!

		Learn more: https://npmjs.com/link
		`)};var pt={command:tn({name:"publish",parameters:["<package paths...>"],flags:{},help:{description:"Link a package to simulate an environment similar to `npm install`"}}),handler:async(u,e)=>{e.length>0&&await Promise.all(e.map(t=>Ei(u,t)))}};(async()=>{const u=un({name:"link",parameters:["[package paths...]"],flags:{deep:{type:Boolean,alias:"d",description:"Run `npx link` on dependencies if they have a link.config.json"}},help:{description:"A better `npm link` -- symlink local dependencies to the current project",render(t,D){return t[0].data=`npx link
`,t.splice(2,0,{type:"section",data:{title:"Website",body:"https://www.npmjs.com/package/link"}}),D.render(t)}},commands:[pt.command]}),e=await O.default.realpath(process.cwd());if(u.command)u.command==="publish"&&await pt.handler(e,u._);else{const{packagePaths:t}=u._;if(t.length>0){await Promise.all(t.map(n=>Vu(e,n,u.flags)));return}const D=await Mu(e);if(!D){console.warn(W`
				Warning: Config file "link.config.json" not found in current directory.
							Read the documentation to learn more: https://www.npmjs.com/package/link
				`),u.showHelp();return}await Uu(e,D,{deep:u.flags.deep})}})().catch(u=>{console.error("Error:",u.message),process.exit(1)});
