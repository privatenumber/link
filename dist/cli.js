#!/usr/bin/env node
"use strict";var ju=Object.defineProperty;var r=(t,e)=>ju(t,"name",{value:e,configurable:!0});var x=require("fs/promises"),xu=require("tty"),k=require("path"),ji=require("module"),G=require("node:path"),re=require("node:fs/promises"),ht=require("fs"),Tu=require("events"),xi=typeof document<"u"?document.currentScript:null;const Ru="known-flag",Pu="unknown-flag",Lu="argument",{stringify:ae}=JSON,Mu=/\B([A-Z])/g,Iu=r(t=>t.replace(Mu,"-$1").toLowerCase(),"v$1"),{hasOwnProperty:Nu}=Object.prototype,oe=r((t,e)=>Nu.call(t,e),"w$2"),_u=r(t=>Array.isArray(t),"L$2"),pt=r(t=>typeof t=="function"?[t,!1]:_u(t)?[t[0],!0]:pt(t.type),"b$2"),Wu=r((t,e)=>t===Boolean?e!=="false":e,"d$2"),Gu=r((t,e)=>typeof e=="boolean"?e:t===Number&&e===""?Number.NaN:t(e),"m$1"),qu=/[\s.:=]/,zu=r(t=>{const e=`Flag name ${ae(t)}`;if(t.length===0)throw new Error(`${e} cannot be empty`);if(t.length===1)throw new Error(`${e} must be longer than a character`);const u=t.match(qu);if(u)throw new Error(`${e} cannot contain ${ae(u?.[0])}`)},"B"),Ju=r(t=>{const e={},u=r((D,n)=>{if(oe(e,D))throw new Error(`Duplicate flags named ${ae(D)}`);e[D]=n},"r");for(const D in t){if(!oe(t,D))continue;zu(D);const n=t[D],i=[[],...pt(n),n];u(D,i);const s=Iu(D);if(D!==s&&u(s,i),"alias"in n&&typeof n.alias=="string"){const{alias:a}=n,l=`Flag alias ${ae(a)} for flag ${ae(D)}`;if(a.length===0)throw new Error(`${l} cannot be empty`);if(a.length>1)throw new Error(`${l} must be a single character`);u(a,i)}}return e},"K$1"),Vu=r((t,e)=>{const u={};for(const D in t){if(!oe(t,D))continue;const[n,,i,s]=e[D];if(n.length===0&&"default"in s){let{default:a}=s;typeof a=="function"&&(a=a()),u[D]=a}else u[D]=i?n:n.pop()}return u},"_$2"),Be="--",Uu=/[.:=]/,Hu=/^-{1,2}\w/,Zu=r(t=>{if(!Hu.test(t))return;const e=!t.startsWith(Be);let u=t.slice(e?1:2),D;const n=u.match(Uu);if(n){const{index:i}=n;D=u.slice(i+1),u=u.slice(0,i)}return[u,D,e]},"N"),Xu=r((t,{onFlag:e,onArgument:u})=>{let D;const n=r((i,s)=>{if(typeof D!="function")return!0;D(i,s),D=void 0},"o");for(let i=0;i<t.length;i+=1){const s=t[i];if(s===Be){n();const l=t.slice(i+1);u?.(l,[i],!0);break}const a=Zu(s);if(a){if(n(),!e)continue;const[l,h,F]=a;if(F)for(let m=0;m<l.length;m+=1){n();const d=m===l.length-1;D=e(l[m],d?h:void 0,[i,m+1,d])}else D=e(l,h,[i])}else n(s,[i])&&u?.([s],[i])}n()},"$$1"),Yu=r((t,e)=>{for(const[u,D,n]of e.reverse()){if(D){const i=t[u];let s=i.slice(0,D);if(n||(s+=i.slice(D+1)),s!=="-"){t[u]=s;continue}}t.splice(u,1)}},"E"),Ku=r((t,e=process.argv.slice(2),{ignore:u}={})=>{const D=[],n=Ju(t),i={},s=[];return s[Be]=[],Xu(e,{onFlag(a,l,h){const F=oe(n,a);if(!u?.(F?Ru:Pu,a,l)){if(F){const[m,d]=n[a],C=Wu(d,l),w=r((y,S)=>{D.push(h),S&&D.push(S),m.push(Gu(d,y||""))},"p");return C===void 0?w:w(C)}oe(i,a)||(i[a]=[]),i[a].push(l===void 0?!0:l),D.push(h)}},onArgument(a,l,h){u?.(Lu,e[l[0]])||(s.push(...a),h?(s[Be]=a,e.splice(l[0])):D.push(l))}}),Yu(e,D),{flags:Vu(t,n),unknownFlags:i,_:s}},"U$2");var Qu=Object.create,ye=Object.defineProperty,eD=Object.defineProperties,tD=Object.getOwnPropertyDescriptor,uD=Object.getOwnPropertyDescriptors,DD=Object.getOwnPropertyNames,ft=Object.getOwnPropertySymbols,nD=Object.getPrototypeOf,Ft=Object.prototype.hasOwnProperty,iD=Object.prototype.propertyIsEnumerable,dt=r((t,e,u)=>e in t?ye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[e]=u,"W$1"),be=r((t,e)=>{for(var u in e||(e={}))Ft.call(e,u)&&dt(t,u,e[u]);if(ft)for(var u of ft(e))iD.call(e,u)&&dt(t,u,e[u]);return t},"p"),Ie=r((t,e)=>eD(t,uD(e)),"c"),sD=r(t=>ye(t,"__esModule",{value:!0}),"nD"),rD=r((t,e)=>()=>(t&&(e=t(t=0)),e),"rD"),aD=r((t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),"iD"),oD=r((t,e,u,D)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of DD(e))!Ft.call(t,n)&&n!=="default"&&ye(t,n,{get:r(()=>e[n],"get"),enumerable:!(D=tD(e,n))||D.enumerable});return t},"oD"),lD=r((t,e)=>oD(sD(ye(t!=null?Qu(nD(t)):{},"default",{value:t,enumerable:!0})),t),"BD"),T=rD(()=>{}),cD=aD((t,e)=>{T(),e.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|(?:\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC68(?:\uD83C\uDFFB(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|[\u2695\u2696\u2708]\uFE0F|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))?|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC)?|(?:\uD83D\uDC69(?:\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83E\uDDD1(?:\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDE35\u200D\uD83D\uDCAB|\uD83D\uDE2E\u200D\uD83D\uDCA8|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83E\uDDD1(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\u2764\uFE0F\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|\u2764\uFE0F|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE2E\uDE35\uDE36\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}});T(),T(),T();var hD=r(t=>{var e,u,D;let n=(e=process.stdout.columns)!=null?e:Number.POSITIVE_INFINITY;return typeof t=="function"&&(t=t(n)),t||(t={}),Array.isArray(t)?{columns:t,stdoutColumns:n}:{columns:(u=t.columns)!=null?u:[],stdoutColumns:(D=t.stdoutColumns)!=null?D:n}},"v");T(),T(),T(),T(),T();function pD({onlyFirst:t=!1}={}){let e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(e,t?void 0:"g")}r(pD,"w$1");function Ct(t){if(typeof t!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof t}\``);return t.replace(pD(),"")}r(Ct,"d$1"),T();function fD(t){return Number.isInteger(t)?t>=4352&&(t<=4447||t===9001||t===9002||11904<=t&&t<=12871&&t!==12351||12880<=t&&t<=19903||19968<=t&&t<=42182||43360<=t&&t<=43388||44032<=t&&t<=55203||63744<=t&&t<=64255||65040<=t&&t<=65049||65072<=t&&t<=65131||65281<=t&&t<=65376||65504<=t&&t<=65510||110592<=t&&t<=110593||127488<=t&&t<=127569||131072<=t&&t<=262141):!1}r(fD,"y$1");var FD=lD(cD());function H(t){if(typeof t!="string"||t.length===0||(t=Ct(t),t.length===0))return 0;t=t.replace((0,FD.default)(),"  ");let e=0;for(let u=0;u<t.length;u++){let D=t.codePointAt(u);D<=31||D>=127&&D<=159||D>=768&&D<=879||(D>65535&&u++,e+=fD(D)?2:1)}return e}r(H,"g");var gt=r(t=>Math.max(...t.split(`
`).map(H)),"b$1"),dD=r(t=>{let e=[];for(let u of t){let{length:D}=u,n=D-e.length;for(let i=0;i<n;i+=1)e.push(0);for(let i=0;i<D;i+=1){let s=gt(u[i]);s>e[i]&&(e[i]=s)}}return e},"k$1");T();var Et=/^\d+%$/,mt={width:"auto",align:"left",contentWidth:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,horizontalPadding:0,paddingLeftString:"",paddingRightString:""},CD=r((t,e)=>{var u;let D=[];for(let n=0;n<t.length;n+=1){let i=(u=e[n])!=null?u:"auto";if(typeof i=="number"||i==="auto"||i==="content-width"||typeof i=="string"&&Et.test(i)){D.push(Ie(be({},mt),{width:i,contentWidth:t[n]}));continue}if(i&&typeof i=="object"){let s=Ie(be(be({},mt),i),{contentWidth:t[n]});s.horizontalPadding=s.paddingLeft+s.paddingRight,D.push(s);continue}throw new Error(`Invalid column width: ${JSON.stringify(i)}`)}return D},"sD");function gD(t,e){for(let u of t){let{width:D}=u;if(D==="content-width"&&(u.width=u.contentWidth),D==="auto"){let l=Math.min(20,u.contentWidth);u.width=l,u.autoOverflow=u.contentWidth-l}if(typeof D=="string"&&Et.test(D)){let l=Number.parseFloat(D.slice(0,-1))/100;u.width=Math.floor(e*l)-(u.paddingLeft+u.paddingRight)}let{horizontalPadding:n}=u,i=1,s=i+n;if(s>=e){let l=s-e,h=Math.ceil(u.paddingLeft/n*l),F=l-h;u.paddingLeft-=h,u.paddingRight-=F,u.horizontalPadding=u.paddingLeft+u.paddingRight}u.paddingLeftString=u.paddingLeft?" ".repeat(u.paddingLeft):"",u.paddingRightString=u.paddingRight?" ".repeat(u.paddingRight):"";let a=e-u.horizontalPadding;u.width=Math.max(Math.min(u.width,a),i)}}r(gD,"aD");var wt=r(()=>Object.assign([],{columns:0}),"G$1");function ED(t,e){let u=[wt()],[D]=u;for(let n of t){let i=n.width+n.horizontalPadding;D.columns+i>e&&(D=wt(),u.push(D)),D.push(n),D.columns+=i}for(let n of u){let i=n.reduce((d,C)=>d+C.width+C.horizontalPadding,0),s=e-i;if(s===0)continue;let a=n.filter(d=>"autoOverflow"in d),l=a.filter(d=>d.autoOverflow>0),h=l.reduce((d,C)=>d+C.autoOverflow,0),F=Math.min(h,s);for(let d of l){let C=Math.floor(d.autoOverflow/h*F);d.width+=C,s-=C}let m=Math.floor(s/a.length);for(let d=0;d<a.length;d+=1){let C=a[d];d===a.length-1?C.width+=s:C.width+=m,s-=m}}return u}r(ED,"lD");function mD(t,e,u){let D=CD(u,e);return gD(D,t),ED(D,t)}r(mD,"Z$1"),T(),T(),T();var Ne=10,Bt=r((t=0)=>e=>`\x1B[${e+t}m`,"U$1"),yt=r((t=0)=>e=>`\x1B[${38+t};5;${e}m`,"V$1"),bt=r((t=0)=>(e,u,D)=>`\x1B[${38+t};2;${e};${u};${D}m`,"Y");function wD(){let t=new Map,e={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};e.color.gray=e.color.blackBright,e.bgColor.bgGray=e.bgColor.bgBlackBright,e.color.grey=e.color.blackBright,e.bgColor.bgGrey=e.bgColor.bgBlackBright;for(let[u,D]of Object.entries(e)){for(let[n,i]of Object.entries(D))e[n]={open:`\x1B[${i[0]}m`,close:`\x1B[${i[1]}m`},D[n]=e[n],t.set(i[0],i[1]);Object.defineProperty(e,u,{value:D,enumerable:!1})}return Object.defineProperty(e,"codes",{value:t,enumerable:!1}),e.color.close="\x1B[39m",e.bgColor.close="\x1B[49m",e.color.ansi=Bt(),e.color.ansi256=yt(),e.color.ansi16m=bt(),e.bgColor.ansi=Bt(Ne),e.bgColor.ansi256=yt(Ne),e.bgColor.ansi16m=bt(Ne),Object.defineProperties(e,{rgbToAnsi256:{value:r((u,D,n)=>u===D&&D===n?u<8?16:u>248?231:Math.round((u-8)/247*24)+232:16+36*Math.round(u/255*5)+6*Math.round(D/255*5)+Math.round(n/255*5),"value"),enumerable:!1},hexToRgb:{value:r(u=>{let D=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(u.toString(16));if(!D)return[0,0,0];let{colorString:n}=D.groups;n.length===3&&(n=n.split("").map(s=>s+s).join(""));let i=Number.parseInt(n,16);return[i>>16&255,i>>8&255,i&255]},"value"),enumerable:!1},hexToAnsi256:{value:r(u=>e.rgbToAnsi256(...e.hexToRgb(u)),"value"),enumerable:!1},ansi256ToAnsi:{value:r(u=>{if(u<8)return 30+u;if(u<16)return 90+(u-8);let D,n,i;if(u>=232)D=((u-232)*10+8)/255,n=D,i=D;else{u-=16;let l=u%36;D=Math.floor(u/36)/5,n=Math.floor(l/6)/5,i=l%6/5}let s=Math.max(D,n,i)*2;if(s===0)return 30;let a=30+(Math.round(i)<<2|Math.round(n)<<1|Math.round(D));return s===2&&(a+=60),a},"value"),enumerable:!1},rgbToAnsi:{value:r((u,D,n)=>e.ansi256ToAnsi(e.rgbToAnsi256(u,D,n)),"value"),enumerable:!1},hexToAnsi:{value:r(u=>e.ansi256ToAnsi(e.hexToAnsi256(u)),"value"),enumerable:!1}}),e}r(wD,"AD");var BD=wD(),yD=BD,$e=new Set(["\x1B","\x9B"]),bD=39,_e="\x07",$t="[",$D="]",vt="m",We=`${$D}8;;`,At=r(t=>`${$e.values().next().value}${$t}${t}${vt}`,"J$1"),St=r(t=>`${$e.values().next().value}${We}${t}${_e}`,"Q"),vD=r(t=>t.split(" ").map(e=>H(e)),"hD"),Ge=r((t,e,u)=>{let D=[...e],n=!1,i=!1,s=H(Ct(t[t.length-1]));for(let[a,l]of D.entries()){let h=H(l);if(s+h<=u?t[t.length-1]+=l:(t.push(l),s=0),$e.has(l)&&(n=!0,i=D.slice(a+1).join("").startsWith(We)),n){i?l===_e&&(n=!1,i=!1):l===vt&&(n=!1);continue}s+=h,s===u&&a<D.length-1&&(t.push(""),s=0)}!s&&t[t.length-1].length>0&&t.length>1&&(t[t.length-2]+=t.pop())},"S$1"),AD=r(t=>{let e=t.split(" "),u=e.length;for(;u>0&&!(H(e[u-1])>0);)u--;return u===e.length?t:e.slice(0,u).join(" ")+e.slice(u).join("")},"cD"),SD=r((t,e,u={})=>{if(u.trim!==!1&&t.trim()==="")return"";let D="",n,i,s=vD(t),a=[""];for(let[h,F]of t.split(" ").entries()){u.trim!==!1&&(a[a.length-1]=a[a.length-1].trimStart());let m=H(a[a.length-1]);if(h!==0&&(m>=e&&(u.wordWrap===!1||u.trim===!1)&&(a.push(""),m=0),(m>0||u.trim===!1)&&(a[a.length-1]+=" ",m++)),u.hard&&s[h]>e){let d=e-m,C=1+Math.floor((s[h]-d-1)/e);Math.floor((s[h]-1)/e)<C&&a.push(""),Ge(a,F,e);continue}if(m+s[h]>e&&m>0&&s[h]>0){if(u.wordWrap===!1&&m<e){Ge(a,F,e);continue}a.push("")}if(m+s[h]>e&&u.wordWrap===!1){Ge(a,F,e);continue}a[a.length-1]+=F}u.trim!==!1&&(a=a.map(h=>AD(h)));let l=[...a.join(`
`)];for(let[h,F]of l.entries()){if(D+=F,$e.has(F)){let{groups:d}=new RegExp(`(?:\\${$t}(?<code>\\d+)m|\\${We}(?<uri>.*)${_e})`).exec(l.slice(h).join(""))||{groups:{}};if(d.code!==void 0){let C=Number.parseFloat(d.code);n=C===bD?void 0:C}else d.uri!==void 0&&(i=d.uri.length===0?void 0:d.uri)}let m=yD.codes.get(Number(n));l[h+1]===`
`?(i&&(D+=St("")),n&&m&&(D+=At(m))):F===`
`&&(n&&m&&(D+=At(n)),i&&(D+=St(i)))}return D},"dD");function kD(t,e,u){return String(t).normalize().replace(/\r\n/g,`
`).split(`
`).map(D=>SD(D,e,u)).join(`
`)}r(kD,"T$1");var kt=r(t=>Array.from({length:t}).fill(""),"X");function OD(t,e){let u=[],D=0;for(let n of t){let i=0,s=n.map(l=>{var h;let F=(h=e[D])!=null?h:"";D+=1,l.preprocess&&(F=l.preprocess(F)),gt(F)>l.width&&(F=kD(F,l.width,{hard:!0}));let m=F.split(`
`);if(l.postprocess){let{postprocess:d}=l;m=m.map((C,w)=>d.call(l,C,w))}return l.paddingTop&&m.unshift(...kt(l.paddingTop)),l.paddingBottom&&m.push(...kt(l.paddingBottom)),m.length>i&&(i=m.length),Ie(be({},l),{lines:m})}),a=[];for(let l=0;l<i;l+=1){let h=s.map(F=>{var m;let d=(m=F.lines[l])!=null?m:"",C=Number.isFinite(F.width)?" ".repeat(F.width-H(d)):"",w=F.paddingLeftString;return F.align==="right"&&(w+=C),w+=d,F.align==="left"&&(w+=C),w+F.paddingRightString}).join("");a.push(h)}u.push(a.join(`
`))}return u.join(`
`)}r(OD,"P");function jD(t,e){if(!t||t.length===0)return"";let u=dD(t),D=u.length;if(D===0)return"";let{stdoutColumns:n,columns:i}=hD(e);if(i.length>D)throw new Error(`${i.length} columns defined, but only ${D} columns found`);let s=mD(n,i,u);return t.map(a=>OD(s,a)).join(`
`)}r(jD,"mD"),T();var xD=["<",">","=",">=","<="];function TD(t){if(!xD.includes(t))throw new TypeError(`Invalid breakpoint operator: ${t}`)}r(TD,"xD");function RD(t){let e=Object.keys(t).map(u=>{let[D,n]=u.split(" ");TD(D);let i=Number.parseInt(n,10);if(Number.isNaN(i))throw new TypeError(`Invalid breakpoint value: ${n}`);let s=t[u];return{operator:D,breakpoint:i,value:s}}).sort((u,D)=>D.breakpoint-u.breakpoint);return u=>{var D;return(D=e.find(({operator:n,breakpoint:i})=>n==="="&&u===i||n===">"&&u>i||n==="<"&&u<i||n===">="&&u>=i||n==="<="&&u<=i))==null?void 0:D.value}}r(RD,"wD");const PD=r(t=>t.replace(/[\W_]([a-z\d])?/gi,(e,u)=>u?u.toUpperCase():""),"S"),LD=r(t=>t.replace(/\B([A-Z])/g,"-$1").toLowerCase(),"q"),MD={"> 80":[{width:"content-width",paddingLeft:2,paddingRight:8},{width:"auto"}],"> 40":[{width:"auto",paddingLeft:2,paddingRight:8,preprocess:r(t=>t.trim(),"preprocess")},{width:"100%",paddingLeft:2,paddingBottom:1}],"> 0":{stdoutColumns:1e3,columns:[{width:"content-width",paddingLeft:2,paddingRight:8},{width:"content-width"}]}};function ID(t){let e=!1;return{type:"table",data:{tableData:Object.keys(t).sort((u,D)=>u.localeCompare(D)).map(u=>{const D=t[u],n="alias"in D;return n&&(e=!0),{name:u,flag:D,flagFormatted:`--${LD(u)}`,aliasesEnabled:e,aliasFormatted:n?`-${D.alias}`:void 0}}).map(u=>(u.aliasesEnabled=e,[{type:"flagName",data:u},{type:"flagDescription",data:u}])),tableBreakpoints:MD}}}r(ID,"D");const Ot=r(t=>!t||(t.version??(t.help?t.help.version:void 0)),"A"),jt=r(t=>{const e="parent"in t&&t.parent?.name;return(e?`${e} `:"")+t.name},"C");function ND(t){const e=[];t.name&&e.push(jt(t));const u=Ot(t)??("parent"in t&&Ot(t.parent));if(u&&e.push(`v${u}`),e.length!==0)return{id:"name",type:"text",data:`${e.join(" ")}
`}}r(ND,"R");function _D(t){const{help:e}=t;if(!(!e||!e.description))return{id:"description",type:"text",data:`${e.description}
`}}r(_D,"L");function WD(t){const e=t.help||{};if("usage"in e)return e.usage?{id:"usage",type:"section",data:{title:"Usage:",body:Array.isArray(e.usage)?e.usage.join(`
`):e.usage}}:void 0;if(t.name){const u=[],D=[jt(t)];if(t.flags&&Object.keys(t.flags).length>0&&D.push("[flags...]"),t.parameters&&t.parameters.length>0){const{parameters:n}=t,i=n.indexOf("--"),s=i>-1&&n.slice(i+1).some(a=>a.startsWith("<"));D.push(n.map(a=>a!=="--"?a:s?"--":"[--]").join(" "))}if(D.length>1&&u.push(D.join(" ")),"commands"in t&&t.commands?.length&&u.push(`${t.name} <command>`),u.length>0)return{id:"usage",type:"section",data:{title:"Usage:",body:u.join(`
`)}}}}r(WD,"T");function GD(t){return!("commands"in t)||!t.commands?.length?void 0:{id:"commands",type:"section",data:{title:"Commands:",body:{type:"table",data:{tableData:t.commands.map(e=>[e.options.name,e.options.help?e.options.help.description:""]),tableOptions:[{width:"content-width",paddingLeft:2,paddingRight:8}]}},indentBody:0}}}r(GD,"_");function qD(t){if(!(!t.flags||Object.keys(t.flags).length===0))return{id:"flags",type:"section",data:{title:"Flags:",body:ID(t.flags),indentBody:0}}}r(qD,"k");function zD(t){const{help:e}=t;if(!e||!e.examples||e.examples.length===0)return;let{examples:u}=e;if(Array.isArray(u)&&(u=u.join(`
`)),u)return{id:"examples",type:"section",data:{title:"Examples:",body:u}}}r(zD,"F");function JD(t){if(!("alias"in t)||!t.alias)return;const{alias:e}=t;return{id:"aliases",type:"section",data:{title:"Aliases:",body:Array.isArray(e)?e.join(", "):e}}}r(JD,"H");const VD=r(t=>[ND,_D,WD,GD,qD,zD,JD].map(e=>e(t)).filter(Boolean),"U"),UD=xu.WriteStream.prototype.hasColors();class HD{static{r(this,"M")}text(e){return e}bold(e){return UD?`\x1B[1m${e}\x1B[22m`:e.toLocaleUpperCase()}indentText({text:e,spaces:u}){return e.replace(/^/gm," ".repeat(u))}heading(e){return this.bold(e)}section({title:e,body:u,indentBody:D=2}){return`${(e?`${this.heading(e)}
`:"")+(u?this.indentText({text:this.render(u),spaces:D}):"")}
`}table({tableData:e,tableOptions:u,tableBreakpoints:D}){return jD(e.map(n=>n.map(i=>this.render(i))),D?RD(D):u)}flagParameter(e){return e===Boolean?"":e===String?"<string>":e===Number?"<number>":Array.isArray(e)?this.flagParameter(e[0]):"<value>"}flagOperator(e){return" "}flagName(e){const{flag:u,flagFormatted:D,aliasesEnabled:n,aliasFormatted:i}=e;let s="";if(i?s+=`${i}, `:n&&(s+="    "),s+=D,"placeholder"in u&&typeof u.placeholder=="string")s+=`${this.flagOperator(e)}${u.placeholder}`;else{const a=this.flagParameter("type"in u?u.type:u);a&&(s+=`${this.flagOperator(e)}${a}`)}return s}flagDefault(e){return JSON.stringify(e)}flagDescription({flag:e}){let u="description"in e?e.description??"":"";if("default"in e){let{default:D}=e;typeof D=="function"&&(D=D()),D&&(u+=` (default: ${this.flagDefault(D)})`)}return u}render(e){if(typeof e=="string")return e;if(Array.isArray(e))return e.map(u=>this.render(u)).join(`
`);if("type"in e&&this[e.type]){const u=this[e.type];if(typeof u=="function")return u.call(this,e.data)}throw new Error(`Invalid node type: ${JSON.stringify(e)}`)}}const qe=/^[\w.-]+$/,{stringify:_}=JSON,ZD=/[|\\{}()[\]^$+*?.]/;function ze(t){const e=[];let u,D;for(const n of t){if(D)throw new Error(`Invalid parameter: Spread parameter ${_(D)} must be last`);const i=n[0],s=n[n.length-1];let a;if(i==="<"&&s===">"&&(a=!0,u))throw new Error(`Invalid parameter: Required parameter ${_(n)} cannot come after optional parameter ${_(u)}`);if(i==="["&&s==="]"&&(a=!1,u=n),a===void 0)throw new Error(`Invalid parameter: ${_(n)}. Must be wrapped in <> (required parameter) or [] (optional parameter)`);let l=n.slice(1,-1);const h=l.slice(-3)==="...";h&&(D=n,l=l.slice(0,-3));const F=l.match(ZD);if(F)throw new Error(`Invalid parameter: ${_(n)}. Invalid character found ${_(F[0])}`);e.push({name:l,required:a,spread:h})}return e}r(ze,"w");function Je(t,e,u,D){for(let n=0;n<e.length;n+=1){const{name:i,required:s,spread:a}=e[n],l=PD(i);if(l in t)throw new Error(`Invalid parameter: ${_(i)} is used more than once.`);const h=a?u.slice(n):u[n];if(a&&(n=e.length),s&&(!h||a&&h.length===0))return console.error(`Error: Missing required parameter ${_(i)}
`),D(),process.exit(1);t[l]=h}}r(Je,"b");function XD(t){return t===void 0||t!==!1}r(XD,"W");function xt(t,e,u,D){const n={...e.flags},i=e.version;i&&(n.version={type:Boolean,description:"Show version"});const{help:s}=e,a=XD(s);a&&!("help"in n)&&(n.help={type:Boolean,alias:"h",description:"Show help"});const l=Ku(n,D,{ignore:e.ignoreArgv}),h=r(()=>{console.log(e.version)},"f");if(i&&l.flags.version===!0)return h(),process.exit(0);const F=new HD,m=a&&s?.render?s.render:w=>F.render(w),d=r(w=>{const y=VD({...e,...w?{help:w}:{},flags:n});console.log(m(y,F))},"u");if(a&&l.flags.help===!0)return d(),process.exit(0);if(e.parameters){let{parameters:w}=e,y=l._;const S=w.indexOf("--"),P=w.slice(S+1),I=Object.create(null);if(S>-1&&P.length>0){w=w.slice(0,S);const z=l._["--"];y=y.slice(0,-z.length||void 0),Je(I,ze(w),y,d),Je(I,ze(P),z,d)}else Je(I,ze(w),y,d);Object.assign(l._,I)}const C={...l,showVersion:h,showHelp:d};return typeof u=="function"&&u(C),{command:t,...C}}r(xt,"x");function YD(t,e){const u=new Map;for(const D of e){const n=[D.options.name],{alias:i}=D.options;i&&(Array.isArray(i)?n.push(...i):n.push(i));for(const s of n){if(u.has(s))throw new Error(`Duplicate command name found: ${_(s)}`);u.set(s,D)}}return u.get(t)}r(YD,"z");function KD(t,e,u=process.argv.slice(2)){if(!t)throw new Error("Options is required");if("name"in t&&(!t.name||!qe.test(t.name)))throw new Error(`Invalid script name: ${_(t.name)}`);const D=u[0];if(t.commands&&qe.test(D)){const n=YD(D,t.commands);if(n)return xt(n.options.name,{...n.options,parent:t},n.callback,u.slice(1))}return xt(void 0,t,e,u)}r(KD,"Z");function QD(t,e){if(!t)throw new Error("Command options are required");const{name:u}=t;if(t.name===void 0)throw new Error("Command name is required");if(!qe.test(u))throw new Error(`Invalid command name ${JSON.stringify(u)}. Command names must be one word.`);return{options:t,callback:e}}r(QD,"G");function ve(){}r(ve,"noop");function Tt(){return typeof WeakMap<"u"?new WeakMap:en()}r(Tt,"createWeakMap");function en(){return{add:ve,delete:ve,get:ve,set:ve,has:r(function(t){return!1},"has")}}r(en,"fakeSetOrMap");var tn=Object.prototype.hasOwnProperty,Ve=r(function(t,e){return tn.call(t,e)},"has");function Ue(t,e){for(var u in e)Ve(e,u)&&(t[u]=e[u]);return t}r(Ue,"extend");var un=/^[ \t]*(?:\r\n|\r|\n)/,Dn=/(?:\r\n|\r|\n)[ \t]*$/,nn=/^(?:[\r\n]|$)/,sn=/(?:\r\n|\r|\n)([ \t]*)(?:[^ \t\r\n]|$)/,rn=/^[ \t]*[\r\n][ \t\r\n]*$/;function Rt(t,e,u){var D=0,n=t[0].match(sn);n&&(D=n[1].length);var i="(\\r\\n|\\r|\\n).{0,"+D+"}",s=new RegExp(i,"g");e&&(t=t.slice(1));var a=u.newline,l=u.trimLeadingNewline,h=u.trimTrailingNewline,F=typeof a=="string",m=t.length,d=t.map(function(C,w){return C=C.replace(s,"$1"),w===0&&l&&(C=C.replace(un,"")),w===m-1&&h&&(C=C.replace(Dn,"")),F&&(C=C.replace(/\r\n|\n|\r/g,function(y){return a})),C});return d}r(Rt,"_outdentArray");function an(t,e){for(var u="",D=0,n=t.length;D<n;D++)u+=t[D],D<n-1&&(u+=e[D]);return u}r(an,"concatStringsAndValues");function on(t){return Ve(t,"raw")&&Ve(t,"length")}r(on,"isTemplateStringsArray");function Pt(t){var e=Tt(),u=Tt();function D(i){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];if(on(i)){var l=i,h=(s[0]===D||s[0]===q)&&rn.test(l[0])&&nn.test(l[1]),F=h?u:e,m=F.get(l);if(m||(m=Rt(l,h,t),F.set(l,m)),s.length===0)return m[0];var d=an(m,h?s.slice(1):s);return d}else return Pt(Ue(Ue({},t),i||{}))}r(D,"outdent");var n=Ue(D,{string:r(function(i){return Rt([i],!1,t)[0]},"string")});return n}r(Pt,"createInstance");var q=Pt({trimLeadingNewline:!0,trimTrailingNewline:!0});if(typeof module<"u")try{module.exports=q,Object.defineProperty(q,"__esModule",{value:!0}),q.default=q,q.outdent=q}catch{}let Z=!0;const K=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};let le=0;if(K.process&&K.process.env&&K.process.stdout){const{FORCE_COLOR:t,NODE_DISABLE_COLORS:e,NO_COLOR:u,TERM:D,COLORTERM:n}=K.process.env;e||u||t==="0"?Z=!1:t==="1"||t==="2"||t==="3"?Z=!0:D==="dumb"?Z=!1:"CI"in K.process.env&&["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(i=>i in K.process.env)?Z=!0:Z=process.stdout.isTTY,Z&&(process.platform==="win32"||n&&(n==="truecolor"||n==="24bit")?le=3:D&&(D.endsWith("-256color")||D.endsWith("256"))?le=2:le=1)}let Lt={enabled:Z,supportLevel:le};function X(t,e,u=1){const D=`\x1B[${t}m`,n=`\x1B[${e}m`,i=new RegExp(`\\x1b\\[${e}m`,"g");return s=>Lt.enabled&&Lt.supportLevel>=u?D+(""+s).replace(i,D)+n:""+s}r(X,"kolorist");const ln=X(1,22),Ae=X(2,22),Mt=X(31,39),It=X(32,39),cn=X(33,39),He=X(35,39),Q=X(36,39),ce=r(t=>x.access(t).then(()=>!0,()=>!1),"fsExists");var hn=require;const Nt=r(async t=>{const e=await x.readFile(t,"utf8");return JSON.parse(e)},"readJsonFile"),pn="link.config.json",_t="link.config.js",Wt=r(async t=>{const e=k.join(t,pn);if(await ce(e))try{return Nt(e)}catch(D){throw new Error(`Failed to parse config JSON ${e}: ${D.message}`)}const u=k.join(t,_t);if(await ce(u))try{return hn(u)}catch(D){throw new Error(`Failed to load config file ${_t}: ${D.message}`)}},"loadConfig");var Gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Se(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}r(Se,"getDefaultExportFromCjs");var ke={};ke.replaceDollarWithPercentPair=zt,ke.convertToSetCommand=qt,ke.convertToSetCommands=Fn;function qt(t,e){var u="";return t=t||"",t=t.trim(),e=e||"",e=e.trim(),t&&e&&e.length>0&&(u="@SET "+t+"="+zt(e)+`\r
`),u}r(qt,"convertToSetCommand");function fn(t){var e={};return t.map(function(u){var D=u.split("=");e[D[0]]=D[1]}),e}r(fn,"extractVariableValuePairs");function Fn(t){var e=fn(t.split(" ")),u="";return Object.keys(e).forEach(function(D){u+=qt(D,e[D])}),u}r(Fn,"convertToSetCommands");function zt(t){var e=/\$\{?([^$@#?\- \t{}:]+)\}?/g,u="",D=0;do{var n=e.exec(t);if(n){var i=t.substring(D,n.index)||"";u+=i+"%"+n[1]+"%",D=e.lastIndex}}while(e.lastIndex>0);return u+=t.slice(D),u}r(zt,"replaceDollarWithPercentPair");const{chmod:Ze,mkdir:dn,readFile:Cn,stat:Jt,unlink:gn,writeFile:Xe}=x,{dirname:Vt,relative:En}=k,mn=ke,wn=/^#!\s*(?:\/usr\/bin\/env\s+(?:-S\s+)?((?:[^ \t=]+=[^ \t=]+\s+)*))?([^ \t]+)(.*)$/,Bn=r((t,e)=>Jt(t).then(()=>Ke(t,e),()=>{}),"cmdShimIfExists"),Ye=r(t=>gn(t).catch(()=>{}),"rm"),Ke=r((t,e)=>Jt(t).then(()=>yn(t,e)),"cmdShim"),yn=r((t,e)=>Promise.all([Ye(e),Ye(e+".cmd"),Ye(e+".ps1")]).then(()=>bn(t,e)),"cmdShim_"),bn=r((t,e)=>dn(Vt(e),{recursive:!0}).then(()=>Cn(t,"utf8")).then(u=>{const n=u.trim().split(/\r*\n/)[0].match(wn);if(!n)return Qe(t,e);const i=n[1]||"",s=n[2],a=n[3]||"";return Qe(t,e,s,a,i)},()=>Qe(t,e)),"writeShim"),Qe=r((t,e,u,D,n)=>{let i=En(Vt(e),t),s=i.split("/").join("\\"),a,l=u&&u.split("\\").join("/"),h,F=l&&`"${l}$exe"`,m;i=i.split("\\").join("/"),D=D||"",n=n||"",u?(a=`"%dp0%\\${u}.exe"`,h=`"$basedir/${u}"`,m=`"$basedir/${u}$exe"`,s=`"%dp0%\\${s}"`,i=`"$basedir/${i}"`):(u=`"%dp0%\\${s}"`,l=`"$basedir/${i}"`,F=l,D="",s="",i="");const d=`@ECHO off\r
GOTO start\r
:find_dp0\r
SET dp0=%~dp0\r
EXIT /b\r
:start\r
SETLOCAL\r
CALL :find_dp0\r
`;let C;if(a){h=h.trim(),D=D.trim();const S=mn.convertToSetCommands(n);C=d+S+`\r
IF EXIST ${a} (\r
  SET "_prog=${a.replace(/(^")|("$)/g,"")}"\r
) ELSE (\r
  SET "_prog=${u.replace(/(^")|("$)/g,"")}"\r
  SET PATHEXT=%PATHEXT:;.JS;=;%\r
)\r
\r
endLocal & goto #_undefined_# 2>NUL || title %COMSPEC% & "%_prog%" ${D} ${s} %*\r
`}else C=`${d}${u} ${D} ${s} %*\r
`;let w=`#!/bin/sh
`;w=w+`basedir=$(dirname "$(echo "$0" | sed -e 's,\\\\,/,g')")

case \`uname\` in
    *CYGWIN*|*MINGW*|*MSYS*)
        if command -v cygpath > /dev/null 2>&1; then
            basedir=\`cygpath -w "$basedir"\`
        fi
    ;;
esac

`,h?w=w+`if [ -x ${h} ]; then
  exec ${n}${h} ${D} ${i} "$@"
else 
  exec ${n}${l} ${D} ${i} "$@"
fi
`:w=w+`exec ${l} ${D} ${i} "$@"
`;let y=`#!/usr/bin/env pwsh
$basedir=Split-Path $MyInvocation.MyCommand.Definition -Parent

$exe=""
if ($PSVersionTable.PSVersion -lt "6.0" -or $IsWindows) {
  # Fix case when both the Windows and Linux builds of Node
  # are installed in the same directory
  $exe=".exe"
}
`;return h?y=y+`$ret=0
if (Test-Path ${m}) {
  # Support pipeline input
  if ($MyInvocation.ExpectingInput) {
    $input | & ${m} ${D} ${i} $args
  } else {
    & ${m} ${D} ${i} $args
  }
  $ret=$LASTEXITCODE
} else {
  # Support pipeline input
  if ($MyInvocation.ExpectingInput) {
    $input | & ${F} ${D} ${i} $args
  } else {
    & ${F} ${D} ${i} $args
  }
  $ret=$LASTEXITCODE
}
exit $ret
`:y=y+`# Support pipeline input
if ($MyInvocation.ExpectingInput) {
  $input | & ${F} ${D} ${i} $args
} else {
  & ${F} ${D} ${i} $args
}
exit $LASTEXITCODE
`,Promise.all([Xe(e+".ps1",y,"utf8"),Xe(e+".cmd",C,"utf8"),Xe(e,w,"utf8")]).then(()=>$n(e))},"writeShim_"),$n=r(t=>Promise.all([Ze(t,493),Ze(t+".cmd",493),Ze(t+".ps1",493)]),"chmodShim");var vn=Ke;Ke.ifExists=Bn;var An=Se(vn);const Ut=r(async t=>{const e=k.join(t,"package.json");if(!await ce(e))throw new Error(`package.json not found in ${t}`);const D=await Nt(e);if(!D.name)throw new Error(`package.json must contain a name: ${e}`);return D},"readPackageJson"),Ht=r(async(t,e,u)=>{const D=await x.lstat(e).catch(()=>null);if(D){if(D.isSymbolicLink()){const n=await x.realpath(e).catch(()=>null);if(t===n)return}await x.rm(e,{recursive:!0})}await x.symlink(t,e,u)},"symlink"),Sn=r(async(t,e)=>{await Ht(t,e),await x.chmod(e,493)},"symlinkBinary"),kn=r(async(t,e)=>{if(await ce(e)){const[u,D]=await Promise.all([x.stat(e),x.stat(t)]);if(u.ino===D.ino)return;await x.rm(e,{recursive:!0})}await x.link(t,e)},"hardlink"),On=r(async(t,e,{name:u,bin:D},n)=>{if(!D)return[];u?.startsWith("@")&&([,u]=u.split("/"));const i=k.join(e,".bin");if(await x.mkdir(i,{recursive:!0}),typeof D=="string"){await n(k.resolve(t,D),k.join(i,u));return}await Promise.all(Object.entries(D).map(async([s,a])=>await n(k.resolve(t,a),k.join(i,s))))},"linkBinaries"),jn="node_modules",xn=r(async(t,e)=>{const u=k.resolve(t,e),D=await Ut(u),n=k.join(t,jn),i=k.join(n,D.name),s=k.dirname(i);await x.mkdir(s,{recursive:!0});const a=k.relative(s,u);return await Ht(a,i,"junction"),await On(u,n,D,process.platform==="win32"?An:Sn),{name:D.name,path:i,target:a}},"symlinkPackage"),Zt=r(async(t,e,u)=>{const D=k.resolve(t,e);if(!await ce(D)){console.warn(Mt("\u2716"),`Package path does not exist: ${e}`),process.exitCode=1;return}try{const i=await xn(t,e);console.log(It("\u2714"),`Symlinked ${He(i.name)}:`,Q(i.path),"\u2192",Q(i.target))}catch(i){console.warn(Mt("\u2716"),"Failed to symlink",Q(e),"with error:",i.message),process.exitCode=1;return}if(u.deep){const i=await Wt(D);i&&await Xt(D,i,u)}},"linkPackage"),Xt=r(async(t,e,u)=>{if(!e.packages)return;const D={deep:u.deep??e.deepLink??!1};await Promise.all(e.packages.map(async n=>await Zt(t,n,D)))},"linkFromConfig");function Tn(t,e){if(typeof t!="function")throw new TypeError(`Expected the first argument to be a \`function\`, got \`${typeof t}\`.`);let u,D=0;return r(function(...i){clearTimeout(u);const s=Date.now(),a=s-D,l=e-a;l<=0?(D=s,t.apply(this,i)):u=setTimeout(()=>{D=Date.now(),t.apply(this,i)},l)},"throttled")}r(Tn,"throttle");var Rn=Tn,Pn=Se(Rn),Ln=r(function(t,e){if(typeof t!="string")throw new TypeError("Expected a string");for(var u=String(t),D="",n=e?!!e.extended:!1,i=e?!!e.globstar:!1,s=!1,a=e&&typeof e.flags=="string"?e.flags:"",l,h=0,F=u.length;h<F;h++)switch(l=u[h],l){case"/":case"$":case"^":case"+":case".":case"(":case")":case"=":case"!":case"|":D+="\\"+l;break;case"?":if(n){D+=".";break}case"[":case"]":if(n){D+=l;break}case"{":if(n){s=!0,D+="(";break}case"}":if(n){s=!1,D+=")";break}case",":if(s){D+="|";break}D+="\\"+l;break;case"*":for(var m=u[h-1],d=1;u[h+1]==="*";)d++,h++;var C=u[h+1];if(!i)D+=".*";else{var w=d>1&&(m==="/"||m===void 0)&&(C==="/"||C===void 0);w?(D+="((?:[^/]*(?:/|$))*)",h++):D+="([^/]*)"}break;default:D+=l}return(!a||!~a.indexOf("g"))&&(D="^"+D+"$"),new RegExp(D,a)},"globToRegexp"),Mn=Se(Ln),Yt={},In=Kt;function Kt(t,e,u){t instanceof RegExp&&(t=Qt(t,u)),e instanceof RegExp&&(e=Qt(e,u));var D=eu(t,e,u);return D&&{start:D[0],end:D[1],pre:u.slice(0,D[0]),body:u.slice(D[0]+t.length,D[1]),post:u.slice(D[1]+e.length)}}r(Kt,"balanced$1");function Qt(t,e){var u=e.match(t);return u?u[0]:null}r(Qt,"maybeMatch"),Kt.range=eu;function eu(t,e,u){var D,n,i,s,a,l=u.indexOf(t),h=u.indexOf(e,l+1),F=l;if(l>=0&&h>0){if(t===e)return[l,h];for(D=[],i=u.length;F>=0&&!a;)F==l?(D.push(F),l=u.indexOf(t,F+1)):D.length==1?a=[D.pop(),h]:(n=D.pop(),n<i&&(i=n,s=h),h=u.indexOf(e,F+1)),F=l<h&&l>=0?l:h;D.length&&(a=[i,s])}return a}r(eu,"range");var tu=In,Nn=Gn,uu="\0SLASH"+Math.random()+"\0",Du="\0OPEN"+Math.random()+"\0",et="\0CLOSE"+Math.random()+"\0",nu="\0COMMA"+Math.random()+"\0",iu="\0PERIOD"+Math.random()+"\0";function tt(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}r(tt,"numeric");function _n(t){return t.split("\\\\").join(uu).split("\\{").join(Du).split("\\}").join(et).split("\\,").join(nu).split("\\.").join(iu)}r(_n,"escapeBraces");function Wn(t){return t.split(uu).join("\\").split(Du).join("{").split(et).join("}").split(nu).join(",").split(iu).join(".")}r(Wn,"unescapeBraces");function su(t){if(!t)return[""];var e=[],u=tu("{","}",t);if(!u)return t.split(",");var D=u.pre,n=u.body,i=u.post,s=D.split(",");s[s.length-1]+="{"+n+"}";var a=su(i);return i.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),e.push.apply(e,s),e}r(su,"parseCommaParts");function Gn(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),he(_n(t),!0).map(Wn)):[]}r(Gn,"expandTop");function qn(t){return"{"+t+"}"}r(qn,"embrace");function zn(t){return/^-?0\d/.test(t)}r(zn,"isPadded");function Jn(t,e){return t<=e}r(Jn,"lte");function Vn(t,e){return t>=e}r(Vn,"gte");function he(t,e){var u=[],D=tu("{","}",t);if(!D)return[t];var n=D.pre,i=D.post.length?he(D.post,!1):[""];if(/\$$/.test(D.pre))for(var s=0;s<i.length;s++){var a=n+"{"+D.body+"}"+i[s];u.push(a)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(D.body),h=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(D.body),F=l||h,m=D.body.indexOf(",")>=0;if(!F&&!m)return D.post.match(/,.*\}/)?(t=D.pre+"{"+D.body+et+D.post,he(t)):[t];var d;if(F)d=D.body.split(/\.\./);else if(d=su(D.body),d.length===1&&(d=he(d[0],!1).map(qn),d.length===1))return i.map(function(we){return D.pre+d[0]+we});var C;if(F){var w=tt(d[0]),y=tt(d[1]),S=Math.max(d[0].length,d[1].length),P=d.length==3?Math.abs(tt(d[2])):1,I=Jn,z=y<w;z&&(P*=-1,I=Vn);var Me=d.some(zn);C=[];for(var U=w;I(U,y);U+=P){var L;if(h)L=String.fromCharCode(U),L==="\\"&&(L="");else if(L=String(U),Me){var Ee=S-L.length;if(Ee>0){var me=new Array(Ee+1).join("0");U<0?L="-"+me+L.slice(1):L=me+L}}C.push(L)}}else{C=[];for(var W=0;W<d.length;W++)C.push.apply(C,he(d[W],!1))}for(var W=0;W<C.length;W++)for(var s=0;s<i.length;s++){var a=n+C[W]+i[s];(!e||F||a)&&u.push(a)}}return u}r(he,"expand");var Oe={};Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.assertValidPattern=void 0;const Un=1024*64,Hn=r(t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>Un)throw new TypeError("pattern is too long")},"assertValidPattern");Oe.assertValidPattern=Hn;var pe={},je={};Object.defineProperty(je,"__esModule",{value:!0}),je.parseClass=void 0;const Zn={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},fe=r(t=>t.replace(/[[\]\\-]/g,"\\$&"),"braceEscape"),Xn=r(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regexpEscape"),ru=r(t=>t.join(""),"rangesToString"),Yn=r((t,e)=>{const u=e;if(t.charAt(u)!=="[")throw new Error("not in a brace expression");const D=[],n=[];let i=u+1,s=!1,a=!1,l=!1,h=!1,F=u,m="";e:for(;i<t.length;){const y=t.charAt(i);if((y==="!"||y==="^")&&i===u+1){h=!0,i++;continue}if(y==="]"&&s&&!l){F=i+1;break}if(s=!0,y==="\\"&&!l){l=!0,i++;continue}if(y==="["&&!l){for(const[S,[P,I,z]]of Object.entries(Zn))if(t.startsWith(S,i)){if(m)return["$.",!1,t.length-u,!0];i+=S.length,z?n.push(P):D.push(P),a=a||I;continue e}}if(l=!1,m){y>m?D.push(fe(m)+"-"+fe(y)):y===m&&D.push(fe(y)),m="",i++;continue}if(t.startsWith("-]",i+1)){D.push(fe(y+"-")),i+=2;continue}if(t.startsWith("-",i+1)){m=y,i+=2;continue}D.push(fe(y)),i++}if(F<i)return["",!1,0,!1];if(!D.length&&!n.length)return["$.",!1,t.length-u,!0];if(n.length===0&&D.length===1&&/^\\?.$/.test(D[0])&&!h){const y=D[0].length===2?D[0].slice(-1):D[0];return[Xn(y),!1,F-u,!1]}const d="["+(h?"^":"")+ru(D)+"]",C="["+(h?"":"^")+ru(n)+"]";return[D.length&&n.length?"("+d+"|"+C+")":D.length?d:C,a,F-u,!0]},"parseClass");je.parseClass=Yn;var ee={};Object.defineProperty(ee,"__esModule",{value:!0}),ee.unescape=void 0;const Kn=r((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),"unescape");ee.unescape=Kn,Object.defineProperty(pe,"__esModule",{value:!0}),pe.AST=void 0;const Qn=je,xe=ee,ei=new Set(["!","?","+","*","@"]),au=r(t=>ei.has(t),"isExtglobType"),ti="(?!(?:^|/)\\.\\.?(?:$|/))",Te="(?!\\.)",ui=new Set(["[","."]),Di=new Set(["..","."]),ni=new Set("().*{}+?[]^$\\!"),ii=r(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),ut="[^/]",ou=ut+"*?",lu=ut+"+?";class R{static{r(this,"AST")}type;#u;#D;#i=!1;#e=[];#t;#s;#a;#r=!1;#n;#o;#c=!1;constructor(e,u,D={}){this.type=e,e&&(this.#D=!0),this.#t=u,this.#u=this.#t?this.#t.#u:this,this.#n=this.#u===this?D:this.#u.#n,this.#a=this.#u===this?[]:this.#u.#a,e==="!"&&!this.#u.#r&&this.#a.push(this),this.#s=this.#t?this.#t.#e.length:0}get hasMagic(){if(this.#D!==void 0)return this.#D;for(const e of this.#e)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#D=!0;return this.#D}toString(){return this.#o!==void 0?this.#o:this.type?this.#o=this.type+"("+this.#e.map(e=>String(e)).join("|")+")":this.#o=this.#e.map(e=>String(e)).join("")}#p(){if(this!==this.#u)throw new Error("should only call on root");if(this.#r)return this;this.toString(),this.#r=!0;let e;for(;e=this.#a.pop();){if(e.type!=="!")continue;let u=e,D=u.#t;for(;D;){for(let n=u.#s+1;!D.type&&n<D.#e.length;n++)for(const i of e.#e){if(typeof i=="string")throw new Error("string part in extglob AST??");i.copyIn(D.#e[n])}u=D,D=u.#t}}return this}push(...e){for(const u of e)if(u!==""){if(typeof u!="string"&&!(u instanceof R&&u.#t===this))throw new Error("invalid part: "+u);this.#e.push(u)}}toJSON(){const e=this.type===null?this.#e.slice().map(u=>typeof u=="string"?u:u.toJSON()):[this.type,...this.#e.map(u=>u.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#u||this.#u.#r&&this.#t?.type==="!")&&e.push({}),e}isStart(){if(this.#u===this)return!0;if(!this.#t?.isStart())return!1;if(this.#s===0)return!0;const e=this.#t;for(let u=0;u<this.#s;u++){const D=e.#e[u];if(!(D instanceof R&&D.type==="!"))return!1}return!0}isEnd(){if(this.#u===this||this.#t?.type==="!")return!0;if(!this.#t?.isEnd())return!1;if(!this.type)return this.#t?.isEnd();const e=this.#t?this.#t.#e.length:0;return this.#s===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){const u=new R(this.type,e);for(const D of this.#e)u.copyIn(D);return u}static#l(e,u,D,n){let i=!1,s=!1,a=-1,l=!1;if(u.type===null){let C=D,w="";for(;C<e.length;){const y=e.charAt(C++);if(i||y==="\\"){i=!i,w+=y;continue}if(s){C===a+1?(y==="^"||y==="!")&&(l=!0):y==="]"&&!(C===a+2&&l)&&(s=!1),w+=y;continue}else if(y==="["){s=!0,a=C,l=!1,w+=y;continue}if(!n.noext&&au(y)&&e.charAt(C)==="("){u.push(w),w="";const S=new R(y,u);C=R.#l(e,S,C,n),u.push(S);continue}w+=y}return u.push(w),C}let h=D+1,F=new R(null,u);const m=[];let d="";for(;h<e.length;){const C=e.charAt(h++);if(i||C==="\\"){i=!i,d+=C;continue}if(s){h===a+1?(C==="^"||C==="!")&&(l=!0):C==="]"&&!(h===a+2&&l)&&(s=!1),d+=C;continue}else if(C==="["){s=!0,a=h,l=!1,d+=C;continue}if(au(C)&&e.charAt(h)==="("){F.push(d),d="";const w=new R(C,F);F.push(w),h=R.#l(e,w,h,n);continue}if(C==="|"){F.push(d),d="",m.push(F),F=new R(null,u);continue}if(C===")")return d===""&&u.#e.length===0&&(u.#c=!0),F.push(d),d="",u.push(...m,F),h;d+=C}return u.type=null,u.#D=void 0,u.#e=[e.substring(D-1)],h}static fromGlob(e,u={}){const D=new R(null,void 0,u);return R.#l(e,D,0,u),D}toMMPattern(){if(this!==this.#u)return this.#u.toMMPattern();const e=this.toString(),[u,D,n,i]=this.toRegExpSource();if(!(n||this.#D||this.#n.nocase&&!this.#n.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return D;const a=(this.#n.nocase?"i":"")+(i?"u":"");return Object.assign(new RegExp(`^${u}$`,a),{_src:u,_glob:e})}get options(){return this.#n}toRegExpSource(e){const u=e??!!this.#n.dot;if(this.#u===this&&this.#p(),!this.type){const l=this.isStart()&&this.isEnd(),h=this.#e.map(C=>{const[w,y,S,P]=typeof C=="string"?R.#f(C,this.#D,l):C.toRegExpSource(e);return this.#D=this.#D||S,this.#i=this.#i||P,w}).join("");let F="";if(this.isStart()&&typeof this.#e[0]=="string"&&!(this.#e.length===1&&Di.has(this.#e[0]))){const w=ui,y=u&&w.has(h.charAt(0))||h.startsWith("\\.")&&w.has(h.charAt(2))||h.startsWith("\\.\\.")&&w.has(h.charAt(4)),S=!u&&!e&&w.has(h.charAt(0));F=y?ti:S?Te:""}let m="";return this.isEnd()&&this.#u.#r&&this.#t?.type==="!"&&(m="(?:$|\\/)"),[F+h+m,(0,xe.unescape)(h),this.#D=!!this.#D,this.#i]}const D=this.type==="*"||this.type==="+",n=this.type==="!"?"(?:(?!(?:":"(?:";let i=this.#h(u);if(this.isStart()&&this.isEnd()&&!i&&this.type!=="!"){const l=this.toString();return this.#e=[l],this.type=null,this.#D=void 0,[l,(0,xe.unescape)(this.toString()),!1,!1]}let s=!D||e||u||!Te?"":this.#h(!0);s===i&&(s=""),s&&(i=`(?:${i})(?:${s})*?`);let a="";if(this.type==="!"&&this.#c)a=(this.isStart()&&!u?Te:"")+lu;else{const l=this.type==="!"?"))"+(this.isStart()&&!u&&!e?Te:"")+ou+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&s?")":this.type==="*"&&s?")?":`)${this.type}`;a=n+i+l}return[a,(0,xe.unescape)(i),this.#D=!!this.#D,this.#i]}#h(e){return this.#e.map(u=>{if(typeof u=="string")throw new Error("string type in extglob ast??");const[D,n,i,s]=u.toRegExpSource(e);return this.#i=this.#i||s,D}).filter(u=>!(this.isStart()&&this.isEnd())||!!u).join("|")}static#f(e,u,D=!1){let n=!1,i="",s=!1;for(let a=0;a<e.length;a++){const l=e.charAt(a);if(n){n=!1,i+=(ni.has(l)?"\\":"")+l;continue}if(l==="\\"){a===e.length-1?i+="\\\\":n=!0;continue}if(l==="["){const[h,F,m,d]=(0,Qn.parseClass)(e,a);if(m){i+=h,s=s||F,a+=m-1,u=u||d;continue}}if(l==="*"){D&&e==="*"?i+=lu:i+=ou,u=!0;continue}if(l==="?"){i+=ut,u=!0;continue}i+=ii(l)}return[i,(0,xe.unescape)(e),!!u,s]}}pe.AST=R;var Fe={};Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.escape=void 0;const si=r((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&"),"escape");Fe.escape=si,function(t){var e=Gt&&Gt.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(t,"__esModule",{value:!0}),t.unescape=t.escape=t.AST=t.Minimatch=t.match=t.makeRe=t.braceExpand=t.defaults=t.filter=t.GLOBSTAR=t.sep=t.minimatch=void 0;const u=e(Nn),D=Oe,n=pe,i=Fe,s=ee,a=r((g,o,c={})=>((0,D.assertValidPattern)(o),!c.nocomment&&o.charAt(0)==="#"?!1:new ne(o,c).match(g)),"minimatch");t.minimatch=a;const l=/^\*+([^+@!?\*\[\(]*)$/,h=r(g=>o=>!o.startsWith(".")&&o.endsWith(g),"starDotExtTest"),F=r(g=>o=>o.endsWith(g),"starDotExtTestDot"),m=r(g=>(g=g.toLowerCase(),o=>!o.startsWith(".")&&o.toLowerCase().endsWith(g)),"starDotExtTestNocase"),d=r(g=>(g=g.toLowerCase(),o=>o.toLowerCase().endsWith(g)),"starDotExtTestNocaseDot"),C=/^\*+\.\*+$/,w=r(g=>!g.startsWith(".")&&g.includes("."),"starDotStarTest"),y=r(g=>g!=="."&&g!==".."&&g.includes("."),"starDotStarTestDot"),S=/^\.\*+$/,P=r(g=>g!=="."&&g!==".."&&g.startsWith("."),"dotStarTest"),I=/^\*+$/,z=r(g=>g.length!==0&&!g.startsWith("."),"starTest"),Me=r(g=>g.length!==0&&g!=="."&&g!=="..","starTestDot"),U=/^\?+([^+@!?\*\[\(]*)?$/,L=r(([g,o=""])=>{const c=we([g]);return o?(o=o.toLowerCase(),p=>c(p)&&p.toLowerCase().endsWith(o)):c},"qmarksTestNocase"),Ee=r(([g,o=""])=>{const c=st([g]);return o?(o=o.toLowerCase(),p=>c(p)&&p.toLowerCase().endsWith(o)):c},"qmarksTestNocaseDot"),me=r(([g,o=""])=>{const c=st([g]);return o?p=>c(p)&&p.endsWith(o):c},"qmarksTestDot"),W=r(([g,o=""])=>{const c=we([g]);return o?p=>c(p)&&p.endsWith(o):c},"qmarksTest"),we=r(([g])=>{const o=g.length;return c=>c.length===o&&!c.startsWith(".")},"qmarksTestNoExt"),st=r(([g])=>{const o=g.length;return c=>c.length===o&&c!=="."&&c!==".."},"qmarksTestNoExtDot"),rt=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",at={win32:{sep:"\\"},posix:{sep:"/"}};t.sep=rt==="win32"?at.win32.sep:at.posix.sep,t.minimatch.sep=t.sep,t.GLOBSTAR=Symbol("globstar **"),t.minimatch.GLOBSTAR=t.GLOBSTAR;const du="[^/]"+"*?",Cu="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",gu="(?:(?!(?:\\/|^)\\.).)*?",Eu=r((g,o={})=>c=>(0,t.minimatch)(c,g,o),"filter");t.filter=Eu,t.minimatch.filter=t.filter;const M=r((g,o={})=>Object.assign({},g,o),"ext"),mu=r(g=>{if(!g||typeof g!="object"||!Object.keys(g).length)return t.minimatch;const o=t.minimatch;return Object.assign(r((p,f,E={})=>o(p,f,M(g,E)),"m"),{Minimatch:class extends o.Minimatch{static{r(this,"Minimatch")}constructor(f,E={}){super(f,M(g,E))}static defaults(f){return o.defaults(M(g,f)).Minimatch}},AST:class extends o.AST{static{r(this,"AST")}constructor(f,E,B={}){super(f,E,M(g,B))}static fromGlob(f,E={}){return o.AST.fromGlob(f,M(g,E))}},unescape:r((p,f={})=>o.unescape(p,M(g,f)),"unescape"),escape:r((p,f={})=>o.escape(p,M(g,f)),"escape"),filter:r((p,f={})=>o.filter(p,M(g,f)),"filter"),defaults:r(p=>o.defaults(M(g,p)),"defaults"),makeRe:r((p,f={})=>o.makeRe(p,M(g,f)),"makeRe"),braceExpand:r((p,f={})=>o.braceExpand(p,M(g,f)),"braceExpand"),match:r((p,f,E={})=>o.match(p,f,M(g,E)),"match"),sep:o.sep,GLOBSTAR:t.GLOBSTAR})},"defaults");t.defaults=mu,t.minimatch.defaults=t.defaults;const wu=r((g,o={})=>((0,D.assertValidPattern)(g),o.nobrace||!/\{(?:(?!\{).)*\}/.test(g)?[g]:(0,u.default)(g)),"braceExpand");t.braceExpand=wu,t.minimatch.braceExpand=t.braceExpand;const Bu=r((g,o={})=>new ne(g,o).makeRe(),"makeRe");t.makeRe=Bu,t.minimatch.makeRe=t.makeRe;const yu=r((g,o,c={})=>{const p=new ne(o,c);return g=g.filter(f=>p.match(f)),p.options.nonull&&!g.length&&g.push(o),g},"match");t.match=yu,t.minimatch.match=t.match;const ot=/[?*]|[+@!]\(.*?\)|\[|\]/,bu=r(g=>g.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape");class ne{static{r(this,"Minimatch")}options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(o,c={}){(0,D.assertValidPattern)(o),c=c||{},this.options=c,this.pattern=o,this.platform=c.platform||rt,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!c.windowsPathsNoEscape||c.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!c.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!c.nonegate,this.comment=!1,this.empty=!1,this.partial=!!c.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=c.windowsNoMagicRoot!==void 0?c.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(const o of this.set)for(const c of o)if(typeof c!="string")return!0;return!1}debug(...o){}make(){const o=this.pattern,c=this.options;if(!c.nocomment&&o.charAt(0)==="#"){this.comment=!0;return}if(!o){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],c.debug&&(this.debug=(...E)=>console.error(...E)),this.debug(this.pattern,this.globSet);const p=this.globSet.map(E=>this.slashSplit(E));this.globParts=this.preprocess(p),this.debug(this.pattern,this.globParts);let f=this.globParts.map((E,B,b)=>{if(this.isWindows&&this.windowsNoMagicRoot){const v=E[0]===""&&E[1]===""&&(E[2]==="?"||!ot.test(E[2]))&&!ot.test(E[3]),A=/^[a-z]:/i.test(E[0]);if(v)return[...E.slice(0,4),...E.slice(4).map($=>this.parse($))];if(A)return[E[0],...E.slice(1).map($=>this.parse($))]}return E.map(v=>this.parse(v))});if(this.debug(this.pattern,f),this.set=f.filter(E=>E.indexOf(!1)===-1),this.isWindows)for(let E=0;E<this.set.length;E++){const B=this.set[E];B[0]===""&&B[1]===""&&this.globParts[E][2]==="?"&&typeof B[3]=="string"&&/^[a-z]:$/i.test(B[3])&&(B[2]="?")}this.debug(this.pattern,this.set)}preprocess(o){if(this.options.noglobstar)for(let p=0;p<o.length;p++)for(let f=0;f<o[p].length;f++)o[p][f]==="**"&&(o[p][f]="*");const{optimizationLevel:c=1}=this.options;return c>=2?(o=this.firstPhasePreProcess(o),o=this.secondPhasePreProcess(o)):c>=1?o=this.levelOneOptimize(o):o=this.adjascentGlobstarOptimize(o),o}adjascentGlobstarOptimize(o){return o.map(c=>{let p=-1;for(;(p=c.indexOf("**",p+1))!==-1;){let f=p;for(;c[f+1]==="**";)f++;f!==p&&c.splice(p,f-p)}return c})}levelOneOptimize(o){return o.map(c=>(c=c.reduce((p,f)=>{const E=p[p.length-1];return f==="**"&&E==="**"?p:f===".."&&E&&E!==".."&&E!=="."&&E!=="**"?(p.pop(),p):(p.push(f),p)},[]),c.length===0?[""]:c))}levelTwoFileOptimize(o){Array.isArray(o)||(o=this.slashSplit(o));let c=!1;do{if(c=!1,!this.preserveMultipleSlashes){for(let f=1;f<o.length-1;f++){const E=o[f];f===1&&E===""&&o[0]===""||(E==="."||E==="")&&(c=!0,o.splice(f,1),f--)}o[0]==="."&&o.length===2&&(o[1]==="."||o[1]==="")&&(c=!0,o.pop())}let p=0;for(;(p=o.indexOf("..",p+1))!==-1;){const f=o[p-1];f&&f!=="."&&f!==".."&&f!=="**"&&(c=!0,o.splice(p-1,2),p-=2)}}while(c);return o.length===0?[""]:o}firstPhasePreProcess(o){let c=!1;do{c=!1;for(let p of o){let f=-1;for(;(f=p.indexOf("**",f+1))!==-1;){let B=f;for(;p[B+1]==="**";)B++;B>f&&p.splice(f+1,B-f);let b=p[f+1];const v=p[f+2],A=p[f+3];if(b!==".."||!v||v==="."||v===".."||!A||A==="."||A==="..")continue;c=!0,p.splice(f,1);const $=p.slice(0);$[f]="**",o.push($),f--}if(!this.preserveMultipleSlashes){for(let B=1;B<p.length-1;B++){const b=p[B];B===1&&b===""&&p[0]===""||(b==="."||b==="")&&(c=!0,p.splice(B,1),B--)}p[0]==="."&&p.length===2&&(p[1]==="."||p[1]==="")&&(c=!0,p.pop())}let E=0;for(;(E=p.indexOf("..",E+1))!==-1;){const B=p[E-1];if(B&&B!=="."&&B!==".."&&B!=="**"){c=!0;const v=E===1&&p[E+1]==="**"?["."]:[];p.splice(E-1,2,...v),p.length===0&&p.push(""),E-=2}}}}while(c);return o}secondPhasePreProcess(o){for(let c=0;c<o.length-1;c++)for(let p=c+1;p<o.length;p++){const f=this.partsMatch(o[c],o[p],!this.preserveMultipleSlashes);if(f){o[c]=[],o[p]=f;break}}return o.filter(c=>c.length)}partsMatch(o,c,p=!1){let f=0,E=0,B=[],b="";for(;f<o.length&&E<c.length;)if(o[f]===c[E])B.push(b==="b"?c[E]:o[f]),f++,E++;else if(p&&o[f]==="**"&&c[E]===o[f+1])B.push(o[f]),f++;else if(p&&c[E]==="**"&&o[f]===c[E+1])B.push(c[E]),E++;else if(o[f]==="*"&&c[E]&&(this.options.dot||!c[E].startsWith("."))&&c[E]!=="**"){if(b==="b")return!1;b="a",B.push(o[f]),f++,E++}else if(c[E]==="*"&&o[f]&&(this.options.dot||!o[f].startsWith("."))&&o[f]!=="**"){if(b==="a")return!1;b="b",B.push(c[E]),f++,E++}else return!1;return o.length===c.length&&B}parseNegate(){if(this.nonegate)return;const o=this.pattern;let c=!1,p=0;for(let f=0;f<o.length&&o.charAt(f)==="!";f++)c=!c,p++;p&&(this.pattern=o.slice(p)),this.negate=c}matchOne(o,c,p=!1){const f=this.options;if(this.isWindows){const J=typeof o[0]=="string"&&/^[a-z]:$/i.test(o[0]),Su=!J&&o[0]===""&&o[1]===""&&o[2]==="?"&&/^[a-z]:$/i.test(o[3]),lt=typeof c[0]=="string"&&/^[a-z]:$/i.test(c[0]),ku=!lt&&c[0]===""&&c[1]===""&&c[2]==="?"&&typeof c[3]=="string"&&/^[a-z]:$/i.test(c[3]),se=Su?3:J?0:void 0,Y=ku?3:lt?0:void 0;if(typeof se=="number"&&typeof Y=="number"){const[ct,Ou]=[o[se],c[Y]];ct.toLowerCase()===Ou.toLowerCase()&&(c[Y]=ct,Y>se?c=c.slice(Y):se>Y&&(o=o.slice(se)))}}const{optimizationLevel:E=1}=this.options;E>=2&&(o=this.levelTwoFileOptimize(o)),this.debug("matchOne",this,{file:o,pattern:c}),this.debug("matchOne",o.length,c.length);for(var B=0,b=0,v=o.length,A=c.length;B<v&&b<A;B++,b++){this.debug("matchOne loop");var $=c[b],O=o[B];if(this.debug(c,$,O),$===!1)return!1;if($===t.GLOBSTAR){this.debug("GLOBSTAR",[c,$,O]);var j=B,N=b+1;if(N===A){for(this.debug("** at the end");B<v;B++)if(o[B]==="."||o[B]===".."||!f.dot&&o[B].charAt(0)===".")return!1;return!0}for(;j<v;){var ie=o[j];if(this.debug(`
globstar while`,o,j,c,N,ie),this.matchOne(o.slice(j),c.slice(N),p))return this.debug("globstar found match!",j,v,ie),!0;if(ie==="."||ie===".."||!f.dot&&ie.charAt(0)==="."){this.debug("dot detected!",o,j,c,N);break}this.debug("globstar swallow a segment, and continue"),j++}return!!(p&&(this.debug(`
>>> no match, partial?`,o,j,c,N),j===v))}let J;if(typeof $=="string"?(J=O===$,this.debug("string match",$,O,J)):(J=$.test(O),this.debug("pattern match",$,O,J)),!J)return!1}if(B===v&&b===A)return!0;if(B===v)return p;if(b===A)return B===v-1&&o[B]==="";throw new Error("wtf?")}braceExpand(){return(0,t.braceExpand)(this.pattern,this.options)}parse(o){(0,D.assertValidPattern)(o);const c=this.options;if(o==="**")return t.GLOBSTAR;if(o==="")return"";let p,f=null;(p=o.match(I))?f=c.dot?Me:z:(p=o.match(l))?f=(c.nocase?c.dot?d:m:c.dot?F:h)(p[1]):(p=o.match(U))?f=(c.nocase?c.dot?Ee:L:c.dot?me:W)(p):(p=o.match(C))?f=c.dot?y:w:(p=o.match(S))&&(f=P);const E=n.AST.fromGlob(o,this.options).toMMPattern();return f&&typeof E=="object"&&Reflect.defineProperty(E,"test",{value:f}),E}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;const o=this.set;if(!o.length)return this.regexp=!1,this.regexp;const c=this.options,p=c.noglobstar?du:c.dot?Cu:gu,f=new Set(c.nocase?["i"]:[]);let E=o.map(v=>{const A=v.map($=>{if($ instanceof RegExp)for(const O of $.flags.split(""))f.add(O);return typeof $=="string"?bu($):$===t.GLOBSTAR?t.GLOBSTAR:$._src});return A.forEach(($,O)=>{const j=A[O+1],N=A[O-1];$!==t.GLOBSTAR||N===t.GLOBSTAR||(N===void 0?j!==void 0&&j!==t.GLOBSTAR?A[O+1]="(?:\\/|"+p+"\\/)?"+j:A[O]=p:j===void 0?A[O-1]=N+"(?:\\/|"+p+")?":j!==t.GLOBSTAR&&(A[O-1]=N+"(?:\\/|\\/"+p+"\\/)"+j,A[O+1]=t.GLOBSTAR))}),A.filter($=>$!==t.GLOBSTAR).join("/")}).join("|");const[B,b]=o.length>1?["(?:",")"]:["",""];E="^"+B+E+b+"$",this.negate&&(E="^(?!"+E+").+$");try{this.regexp=new RegExp(E,[...f].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(o){return this.preserveMultipleSlashes?o.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(o)?["",...o.split(/\/+/)]:o.split(/\/+/)}match(o,c=this.partial){if(this.debug("match",o,this.pattern),this.comment)return!1;if(this.empty)return o==="";if(o==="/"&&c)return!0;const p=this.options;this.isWindows&&(o=o.split("\\").join("/"));const f=this.slashSplit(o);this.debug(this.pattern,"split",f);const E=this.set;this.debug(this.pattern,"set",E);let B=f[f.length-1];if(!B)for(let b=f.length-2;!B&&b>=0;b--)B=f[b];for(let b=0;b<E.length;b++){const v=E[b];let A=f;if(p.matchBase&&v.length===1&&(A=[B]),this.matchOne(A,v,c))return p.flipNegate?!0:!this.negate}return p.flipNegate?!1:this.negate}static defaults(o){return t.minimatch.defaults(o).Minimatch}}t.Minimatch=ne;var $u=pe;Object.defineProperty(t,"AST",{enumerable:!0,get:r(function(){return $u.AST},"get")});var vu=Fe;Object.defineProperty(t,"escape",{enumerable:!0,get:r(function(){return vu.escape},"get")});var Au=ee;Object.defineProperty(t,"unescape",{enumerable:!0,get:r(function(){return Au.unescape},"get")}),t.minimatch.AST=n.AST,t.minimatch.Minimatch=ne,t.minimatch.escape=i.escape,t.minimatch.unescape=s.unescape}(Yt);const V=ht,Dt=k,ri=Tu.EventEmitter,ai=Yt.Minimatch;class Ce extends ri{static{r(this,"Walker")}constructor(e){e=e||{},super(e),this.isSymbolicLink=e.isSymbolicLink,this.path=e.path||process.cwd(),this.basename=Dt.basename(this.path),this.ignoreFiles=e.ignoreFiles||[".ignore"],this.ignoreRules={},this.parent=e.parent||null,this.includeEmpty=!!e.includeEmpty,this.root=this.parent?this.parent.root:this.path,this.follow=!!e.follow,this.result=this.parent?this.parent.result:new Set,this.entries=null,this.sawError=!1,this.exact=e.exact}sort(e,u){return e.localeCompare(u,"en")}emit(e,u){let D=!1;return this.sawError&&e==="error"||(e==="error"?this.sawError=!0:e==="done"&&!this.parent&&(u=Array.from(u).map(n=>/^@/.test(n)?`./${n}`:n).sort(this.sort),this.result=u),e==="error"&&this.parent?D=this.parent.emit("error",u):D=super.emit(e,u)),D}start(){return V.readdir(this.path,(e,u)=>e?this.emit("error",e):this.onReaddir(u)),this}isIgnoreFile(e){return e!=="."&&e!==".."&&this.ignoreFiles.indexOf(e)!==-1}onReaddir(e){this.entries=e,e.length===0?(this.includeEmpty&&this.result.add(this.path.slice(this.root.length+1)),this.emit("done",this.result)):this.entries.some(D=>this.isIgnoreFile(D))?this.addIgnoreFiles():this.filterEntries()}addIgnoreFiles(){const e=this.entries.filter(n=>this.isIgnoreFile(n));let u=e.length;const D=r(()=>{--u===0&&this.filterEntries()},"then");e.forEach(n=>this.addIgnoreFile(n,D))}addIgnoreFile(e,u){const D=Dt.resolve(this.path,e);V.readFile(D,"utf8",(n,i)=>n?this.emit("error",n):this.onReadIgnoreFile(e,i,u))}onReadIgnoreFile(e,u,D){const n={matchBase:!0,dot:!0,flipNegate:!0,nocase:!0},i=u.split(/\r?\n/).filter(s=>!/^#|^$/.test(s.trim())).map(s=>new ai(s.trim(),n));this.ignoreRules[e]=i,D()}filterEntries(){const e=this.entries.map(D=>{const n=this.filterEntry(D),i=this.filterEntry(D,!0);return n||i?[D,n,i]:!1}).filter(D=>D);let u=e.length;if(u===0)this.emit("done",this.result);else{const D=r(()=>{--u===0&&this.emit("done",this.result)},"then");e.forEach(n=>{const i=n[0],s=n[1],a=n[2];this.stat({entry:i,file:s,dir:a},D)})}}onstat({st:e,entry:u,file:D,dir:n,isSymbolicLink:i},s){const a=this.path+"/"+u;e.isDirectory()?n?this.walker(u,{isSymbolicLink:i,exact:D||this.filterEntry(u+"/")},s):s():(D&&this.result.add(a.slice(this.root.length+1)),s())}stat({entry:e,file:u,dir:D},n){const i=this.path+"/"+e;V.lstat(i,(s,a)=>{if(s)this.emit("error",s);else{const l=a.isSymbolicLink();this.follow&&l?V.stat(i,(h,F)=>{h?this.emit("error",h):this.onstat({st:F,entry:e,file:u,dir:D,isSymbolicLink:l},n)}):this.onstat({st:a,entry:e,file:u,dir:D,isSymbolicLink:l},n)}})}walkerOpt(e,u){return{path:this.path+"/"+e,parent:this,ignoreFiles:this.ignoreFiles,follow:this.follow,includeEmpty:this.includeEmpty,...u}}walker(e,u,D){new Ce(this.walkerOpt(e,u)).on("done",D).start()}filterEntry(e,u,D){let n=!0;if(this.parent&&this.parent.filterEntry){const i=this.basename+"/"+e,s=D||e;if(n=this.parent.filterEntry(i,u,s),!n&&!this.exact)return!1}return this.ignoreFiles.forEach(i=>{this.ignoreRules[i]&&this.ignoreRules[i].forEach(s=>{if(s.negate!==n){const a=D&&s.globParts.some(h=>h.length<=(h.slice(-1)[0]?1:2));(s.match("/"+e)||s.match(e)||!!u&&(s.match("/"+e+"/")||s.match(e+"/")||s.negate&&(s.match("/"+e,!0)||s.match(e,!0))||a&&(s.match("/"+D+"/")||s.match(D+"/")||s.negate&&(s.match("/"+D,!0)||s.match(D,!0)))))&&(n=s.negate)}})}),n}}class Le extends Ce{static{r(this,"WalkerSync")}start(){return this.onReaddir(V.readdirSync(this.path)),this}addIgnoreFile(e,u){const D=Dt.resolve(this.path,e);this.onReadIgnoreFile(e,V.readFileSync(D,"utf8"),u)}stat({entry:e,file:u,dir:D},n){const i=this.path+"/"+e;let s=V.lstatSync(i);const a=s.isSymbolicLink();this.follow&&a&&(s=V.statSync(i)),this.onstat({st:s,entry:e,file:u,dir:D,isSymbolicLink:a},n)}walker(e,u,D){new Le(this.walkerOpt(e,u)).start(),D()}}const Re=r((t,e)=>{const u=new Promise((D,n)=>{new Ce(t).on("done",D).on("error",n).start()});return e?u.then(D=>e(null,D),e):u},"walk$1"),oi=r(t=>new Le(t).start().result,"walkSync");var li=Re;Re.sync=oi,Re.Walker=Ce,Re.WalkerSync=Le;const{Walker:ci}=li,{lstatSync:hi,readFileSync:pi}=ht,{basename:cu,dirname:fi,extname:hu,join:te,relative:ue,resolve:Fi,sep:di}=k,de=Symbol("npm-packlist.rules.default"),De=Symbol("npm-packlist.rules.strict"),Ci=r(t=>/\*/.test(t),"nameIsBadForWindows"),gi=[".npmignore",".gitignore","**/.git","**/.svn","**/.hg","**/CVS","**/.git/**","**/.svn/**","**/.hg/**","**/CVS/**","/.lock-wscript","/.wafpickle-*","/build/config.gypi","npm-debug.log","**/.npmrc",".*.swp",".DS_Store","**/.DS_Store/**","._*","**/._*/**","*.orig","/archived-packages/**"],pu=["/.git"],Pe=r(t=>t.split("\\").join("/"),"normalizePath"),fu=r((t,e,u=[])=>{for(const s of[".npmignore",".gitignore"])try{const a=pi(te(t,s),{encoding:"utf8"});u.push(a);break}catch(a){if(a.code!=="ENOENT")throw a}if(!e)return u;const D=e.split(di,1)[0],n=te(t,D),i=ue(n,te(t,e));return fu(n,i,u)},"readOutOfTreeIgnoreFiles");class ge extends ci{static{r(this,"PackWalker")}constructor(e,u){const D={...u,includeEmpty:!1,follow:!1,path:Fi(u?.path||e.path).replace(/\\/g,"/"),ignoreFiles:u?.ignoreFiles||[de,"package.json",".npmignore",".gitignore",De]};super(D),this.isPackage=D.isPackage,this.seen=D.seen||new Set,this.tree=e,this.requiredFiles=D.requiredFiles||[];const n=[];if(D.prefix&&D.workspaces){const i=Pe(D.path),s=Pe(D.prefix),a=D.workspaces.map(l=>Pe(l));if(i!==s&&a.includes(i)){const l=ue(D.prefix,fi(D.path));n.push(...fu(D.prefix,l))}else i===s&&n.push(...a.map(l=>Pe(ue(D.path,l))))}this.injectRules(de,[...gi,...n]),this.isPackage||this.injectRules(De,[...pu,...this.requiredFiles.map(i=>`!${i}`)])}addIgnoreFile(e,u){return e!=="package.json"||!this.isPackage?super.addIgnoreFile(e,u):this.processPackage(u)}emit(e,u){return e!=="done"||!this.isPackage?super.emit(e,u):(this.gatherBundles().then(()=>{super.emit("done",this.result)}),!0)}filterEntries(){return this.ignoreRules["package.json"]?(this.ignoreRules[".npmignore"]=null,this.ignoreRules[".gitignore"]=null):this.ignoreRules[".npmignore"]&&(this.ignoreRules[".gitignore"]=null),super.filterEntries()}onstat(e,u){return!e.st.isFile()&&!e.st.isDirectory()?u():super.onstat(e,u)}stat(e,u){return Ci(e.entry)?u():super.stat(e,u)}walkerOpt(e,u){let D=null;if(this.tree.workspaces){const n=[...this.tree.workspaces.values()].map(s=>s.replace(/\\/g,"/")),i=te(this.path,e).replace(/\\/g,"/");n.includes(i)&&(D=[de,"package.json",".npmignore",".gitignore",De])}else D=[de,".npmignore",".gitignore",De];return{...super.walkerOpt(e,u),ignoreFiles:D,requiredFiles:this.requiredFiles.map(n=>ue(n,e)===".."?ue(e,n).replace(/\\/g,"/"):!1).filter(Boolean)}}walker(e,u,D){new ge(this.tree,this.walkerOpt(e,u)).on("done",D).start()}sort(e,u){const D=hu(e).toLowerCase(),n=hu(u).toLowerCase(),i=cu(e).toLowerCase(),s=cu(u).toLowerCase();return D.localeCompare(n,"en")||i.localeCompare(s,"en")||e.localeCompare(u,"en")}injectRules(e,u,D=()=>{}){this.onReadIgnoreFile(e,`${u.join(`
`)}
`,D)}processPackage(e){const{bin:u,browser:D,files:n,main:i}=this.tree.package,s=[],a=[...pu,"!/package.json","!/readme{,.*[^~$]}","!/copying{,.*[^~$]}","!/license{,.*[^~$]}","!/licence{,.*[^~$]}","/.git","/node_modules",".npmrc","/package-lock.json","/yarn.lock","/pnpm-lock.yaml"];if(n){for(let l of n){l.startsWith("./")&&(l=l.slice(1)),l.endsWith("/*")&&(l+="*");const h=`!${l}`;try{const F=hi(te(this.path,l.replace(/^!+/,"")).replace(/\\/g,"/"));F.isFile()?(a.unshift(h),this.requiredFiles.push(l.startsWith("/")?l.slice(1):l)):F.isDirectory()&&(s.push(h),s.push(`${h}/**`))}catch{s.push(h)}}this.injectRules("package.json",["*",...s])}if(D&&a.push(`!/${D}`),i&&a.push(`!/${i}`),u)for(const l in u)a.push(`!/${u[l]}`);this.injectRules(De,a,e)}async gatherBundles(){if(this.seen.has(this.tree))return;this.seen.add(this.tree);let e;if(this.tree.isProjectRoot){const{bundleDependencies:u}=this.tree.package;e=u||[]}else{const{dependencies:u,optionalDependencies:D}=this.tree.package;e=Object.keys(u||{}).concat(Object.keys(D||{}))}for(const u of e){const D=this.tree.edgesOut.get(u);if(!D||D.peer||D.dev)continue;const n=this.tree.edgesOut.get(u).to;if(!n)continue;const i=n.path,s=n.target,a={path:i,isPackage:!0,ignoreFiles:[],seen:this.seen};n.isLink&&a.ignoreFiles.push(de),a.ignoreFiles.push("package.json"),n.isLink&&(a.ignoreFiles.push(".npmignore"),a.ignoreFiles.push(".gitignore")),a.ignoreFiles.push(De);const l=new ge(s,a),h=await new Promise((m,d)=>{l.on("error",d),l.on("done",m),l.start()}),F=ue(this.root,l.path);for(const m of h)this.result.add(te(F,m).replace(/\\/g,"/"))}}}const Fu=r((t,e,u)=>{typeof e=="function"&&(u=e,e={});const D=new Promise((n,i)=>{new ge(t,{...e,isPackage:!0}).on("done",n).on("error",i).start()});return u?D.then(n=>u(null,n),u):D},"walk");var Ei=Fu;Fu.Walker=ge;var mi=Se(Ei);const wi=new Map,nt=r((t,e)=>mi({path:t,package:e,edgesOut:wi}),"getNpmPacklist"),Bi=process.cwd(),it=r(t=>G.relative(Bi,t),"cwdPath"),yi=r(()=>new Date().toLocaleTimeString(void 0,{hour:"numeric",minute:"numeric",second:"numeric",hour12:!0}),"getPrettyTime"),bi=r(async(t,e,u,D=nt(e,u))=>{const[n,i]=await Promise.all([nt(t,u),D]);console.log(`Linking ${He(u.name)} in publish mode:`),await Promise.all(i.map(async s=>{const a=G.join(e,s),l=G.join(t,s);await re.mkdir(G.dirname(l),{recursive:!0}),await kn(a,l);const h=n.indexOf(s);h>-1&&n.splice(h,1),console.log(`  ${It("\u2714")}`,Q(it(l)),"\u2192",Q(it(a)))})),await Promise.all(n.map(async s=>{const a=G.join(t,s);await re.rm(a)}))},"hardlinkPackage"),$i=r(async(t,e)=>(await re.stat(t).catch(()=>null))?.isDirectory()?(await re.realpath(t)).startsWith(e):!1,"isValidSetup"),vi=r(async(t,e,u)=>{const D=G.resolve(t,e),n=await Ut(D),i=G.join(t,"node_modules/"),s=G.join(i,n.name);if(!await $i(s,i)){console.error(q`
			Error: Package ${He(n.name)} is not set up
	
			${ln("Setup instructions")}
			1. In the Dependency package, create a tarball:
			  ${Ae("$ npm pack")}
	
			2. In the Consuming package, install the tarball and link the Dependency:
			  ${Ae("$ npm install --no-save <dependency-tarball>")}
			  ${Ae("$ npx link publish <dependency-path>")}
	
			3. Start developing!
	
			Learn more: https://npmjs.com/link
			`);return}const a=Pn(bi,500);if(await a(s,D,n),u){const l={globstar:!0,extended:!0},h=["**/{npm-debug.log,*.orig,package-lock.json,yarn.lock,pnpm-lock.yaml}","**/node_modules/**","**/.{_*,*.swp,DS_Store,gitignore,npmrc,npmignore,lock-wscript,.wafpickle-*}","**/.{_*,git,svn,hg,CVS}/**"].map(m=>Mn(m,l)),F=re.watch(D,{recursive:!0});for await(const{eventType:m,filename:d}of F){if(!d||h.some(y=>y.test(d)))continue;const w=await nt(D,n);w.includes(d)&&(console.log(`
${Ae(yi())}`,"Detected",cn(m),"in",`${Q(it(G.join(D,d)))}
`),await a(s,D,n,w))}}},"linkPublishMode"),Ai=QD({name:"publish",parameters:["<package paths...>"],flags:{watch:{type:Boolean,alias:"w",description:"Watch for changes in the package and automatically relink"}},help:{description:"Link a package to simulate an environment similar to `npm install`"}}),Si=r(async(t,e,u)=>{e.length>0&&await Promise.all(e.map(D=>vi(t,D,u.watch)))},"publishHandler");(async()=>{const t=KD({name:"link",parameters:["[package paths...]"],flags:{deep:{type:Boolean,alias:"d",description:"Run `npx link` on dependencies if they have a link.config.json"}},help:{description:"A better `npm link` -- symlink local dependencies to the current project",render:r((u,D)=>(u[0].data=`npx link
`,u.splice(2,0,{type:"section",data:{title:"Website",body:"https://www.npmjs.com/package/link"}}),D.render(u)),"render")},commands:[Ai]}),e=await x.realpath(process.cwd());if(t.command)t.command==="publish"&&await Si(e,t._,t.flags);else{const{packagePaths:u}=t._;if(u.length>0){await Promise.all(u.map(n=>Zt(e,n,t.flags)));return}const D=await Wt(e);if(!D){console.warn(q`
				Warning: Config file "link.config.json" not found in current directory.
							Read the documentation to learn more: https://www.npmjs.com/package/link
				`),t.showHelp();return}await Xt(e,D,{deep:t.flags.deep})}})().catch(t=>{console.error("Error:",t.message),process.exit(1)});
